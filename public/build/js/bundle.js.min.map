{"version":3,"sources":["Infohotel.js","auth.js","alertas.js","catalogo_productos.js","categorias.js","checkout.js","clientes.js","habitaciones.js","dashboard.js","niveles.js","procesarventadirecta.js","procesarventareserva.js","recepcion.js","recepcionhabitacion.js","registro.js","registroactividades.js","reportediario.js","reportemensual.js","reservaciones.js","usuarios.js","reservacionesdahs.js"],"names":["window","location","pathname","btnActualizarInfo","document","getElementById","mostrarAlerta","titulo","mensaje","tipo","Swal","fire","icon","title","text","then","$","modal","reload","addEventListener","async","e","preventDefault","hotel","id","dataset","nombre","value","trim","telefono","correo","ubicacion","img","files","datos","FormData","Object","entries","forEach","key","append","url","respuesta","fetch","method","body","resultado","json","error","console","log","urlRedireccion","href","mostrarAlerta2","mensajeResultado","style","display","textContent","className","setTimeout","mostrarAlerta3","willClose","obtenerFechaFormateada","fecha","Date","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","btniniciarSesion","event","usuario","email","password","autorizado","dataTable","dataTableInit","dataTableOption","destroy","pageLength","language","dom","columnDefs","orderable","targets","initDataTable","productos","listarProductos","length","llenarTabla","DataTable","response","tbody","innerHTML","producto","index","row","precio","stock","categoria_producto_id","codigo_barras","proveedor","foto","target","closest","productoId","ok","Error","statusText","src","querySelector","productoActualizado","inputFile","parentNode","replaceChild","cloneNode","getAttribute","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","isConfirmed","productoNuevo","estatusDictionary","0","1","categorias","listarCategorias","status","categoria","estatus","estado","capacidad_maxima","tipo_cama","precio_base","servicios_incluidos","categoriaId","categoriaOriginal","categoriaActualizada","cambios","keys","metodo","headers","Content-Type","JSON","stringify","errorData","respuestaUpdate","message","categoriaNueva","idReserva","URLSearchParams","search","get","inputPenalidad","totalPagarElement","metodoPagoSelect","btnTerminarReservacion","grupoEfectivo","cantidadEfectivoInput","feriaCalculadaInput","totalOriginal","parseFloat","innerText","replace","totalActual","actualizarTotalYMetodoPago","penalidad","isNaN","toLocaleString","minimumFractionDigits","maximumFractionDigits","classList","add","remove","cantidad","feria","alert","id_reserva","deudas_liquidadas","clientes","listarClientes","cliente","apellidos","direccion","documento_identidad","clienteOriginal","clientesId","clienteId","clienteActualizado","barChart","ctx","getContext","periodoSelect","cargarDatos","periodo","actualizarGrafica","data","meses","labels","map","item","mes","ganancias","Chart","type","datasets","label","backgroundColor","borderColor","borderWidth","options","responsive","scales","y","beginAtZero","this","habitaciones","listarhabitaciones","habitacion","numero","id_nivel","id_categoria","detalles_personalizados","habitacionId","habitacionOriginal","habitacionActualizada","habitacionNueva","niveles","listarNiveles","nivel","nivelId","nivelOriginal","nivelActualizado","nivelNuevo","inputBuscador","listaSugerencias","tablaVenta","metodoPago","cantidadEfectivo","feriaCalculada","inputTotalPagar","btnTerminarVenta","serviciosVendidos","productosDisponibles","total","renderSugerencias","Array","isArray","li","createElement","agregarProducto","limpiarLista","appendChild","precioUnitario","productoExistente","find","p","push","id_producto","actualizarTabla","servicio","fila","toFixed","agregarEventosEliminar","agregarEventosContador","calcularTotal","querySelectorAll","boton","codigoBarras","eliminarProducto","filter","btnSumar","btnRestar","btn","query","contains","totalRaw","Math","abs","usuario_id","ventas","producto_id","Number","monto","descripcion","cuandoPagar","grupoMetodoPago","reservacion_id","actualizarEstadoHabitacion","nuevoEstado","id_estado_habitacion","catch","result","undefined","inputCorreoCliente","inputNombreCliente","inputApellidosCliente","inputDocumentoCliente","inputTelefonoCliente","inputDireccionCliente","btnCrearCliente","inputNombreClienteNuevo","inputApellidosClienteNuevo","inputCorreoClienteNuevo","inputTelefonoClienteNuevo","inputDocumentoClienteNuevo","inputDireccionClienteNuevo","clienteNuevo","inputFechaEntrada","inputFechaSalida","inputTipoDescuento","inputDescuento","inputCobroExtra","inputAdelanto","precioHabitacion","inputMetodoPago","inputObservaciones","noches","totalPendiente","descuento","tipoDescuento","cobroExtra","adelanto","buscarClientes","encodeURIComponent","mostrarSugerencias","seleccionarCliente","calcularNoches","fechaEntrada","fechaSalida","calcularTotalPagar","tipoDescuentoSeleccionado","totalConDescuento","actualizarCalculo","input","radio","observaciones","ahora","horaActual","idHabitacion","reserva","fechas","entrada","salida","pago","totalPagar","totalPagarOriginal","metodo_pago","formData","btnCrear","nuevoUsuario","apellido","password2","actividades","obtenerActividades","actividad","nombre_usuario","accion","detalle","hora","dataTableReservas","dataTableServicios","dataTableReservasInit","dataTableServiciosInit","nombreHotel","fechaFormateada","mensajeTopReporte","tituloReporteReservas","tituloReporteServicios","nombreArchivoReservas","nombreArchivoServicios","totalVentaServicios","totalReservaciones","totalGeneral","totalVentaDirecta","totalVentaReservacion","totalVentaGeneral","configBase","paging","ordering","info","opcionesReservas","buttons","extend","messageTop","filename","orientation","pageSize","exportOptions","columns","modifier","page","customize","doc","defaultStyle","fontSize","styles","tableHeader","opcionesServicios","initReportesDiarios","reservas","llenarTablaReservas","llenarTablaServicios","No_Reserva","Huesped","Habitaciones","Precio_Total","Descuento","Cobro_Extra","Adelanto","Penalidad","Ventas_Servicios","Total","Tiempo_Rebasado","ventasServicios","Identificador","Tipo","Habitacion","Articulo","Cantidad","Precio_Unitario","Hora","toLowerCase","initReporteMensual","inputCorreo","selectHabitacion","btnSiguiente","btnAtras","btnConfirmar","totalPagarInput","descuentoInput","cobroExtraInput","adelantoInput","timeoutBusqueda","pasoActual","habitacionesDisponibles","habitacionesSeleccionadas","choices","Choices","removeItemButton","placeholder","placeholderValue","searchEnabled","guardarClienteNuevo","progressBar","actualizarBarraProgreso","porcentaje","width","setAttribute","cambiarPaso","nuevoPaso","toggle","cargarHabitaciones","clearChoices","setChoices","disabled","fechaEntradaDate","diferenciaNoches","h","resetearModal","habitacionesSelect","option","selected","inputNombre","inputTelefono","getValue","clearTimeout","valor","clienteFinal","datosReserva","jsonDatosReserva","calendarEl","modalElement","MyModal","bootstrap","Modal","todasHabitaciones","calendar","FullCalendar","Calendar","displayEventTime","locale","initialView","headerToolbar","left","center","right","buttonText","today","prev","next","month","week","day","list","allDayText","events","dateClick","startInput","dateStr","show","render","reservacion","evento","ID_reserva","cliente_nombre","start","fecha_entrada","end","fecha_salida","description","estado_descripcion","allDay","color","estado_color","addEvent","modalEditarReservacion","MyModalEditarReserva","reservacionOriginal","totalPriceBase","calculateTotalPrice","fechaEntradaObj","totalPrice","toString","descuentoPorcentaje","checked","on","idEvento","cliente_apellidos","split","cobro_extra","tipo_descuento","porcentajeDescuento","descuento_aplicado","precio_total","ID_estado","precio_pendiente","populateEditForm","habitacionesSeleccionadasIds","responseHabitaciones","habitacionesCompletasSeleccionadas","includes","opciones","clearStore","cargarHabitacionesDisponibles","ID_habitacion","handleEventClick","reservacionId","reservacionActualizada","rolesDictionary","2","3","visible","usuarios","listarUsers","user","rol","rol_id","usuarioId","userId","usuarioActualizado","usuarioNuevo","test"],"mappings":"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","file":"bundle.js","sourcesContent":["if (window.location.pathname === '/admin/configuracion/informacion') {\n    //Obtener datos del formulario por si hay actualizacion\n    const btnActualizarInfo = document.getElementById('btnActualizarInfo');\n\n    if(btnActualizarInfo){\n        btnActualizarInfo.addEventListener('click', async function(e){\n            e.preventDefault();\n            //alert('diste click en actualizar info');\n\n            const hotel = {\n                id: btnActualizarInfo.dataset.id, \n                nombre : document.getElementById('nombre').value.trim(),\n                telefono : document.getElementById('telefono').value.trim(),\n                correo : document.getElementById('correo').value.trim(),\n                ubicacion : document.getElementById('ubicacion').value.trim(),\n                img : document.getElementById('logo').files[0]\n            }\n\n            try {\n                //Crear datos para enviar en formdata\n                const datos  = new FormData();\n                Object.entries(hotel).forEach(([key, value]) => datos.append(key, value));\n                const url = '/admin/configuracion/informacion/actualizar';\n                const respuesta = await fetch(url, { // Corregido: Usar un objeto en lugar de un array\n                    method: 'POST',\n                    body: datos\n                });\n\n                const resultado = await respuesta.json();\n                mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n                                \n            } catch (error) {\n                console.log('error');\n            }\n\n        })\n    }\n\n    function mostrarAlerta(titulo, mensaje, tipo) {\n        Swal.fire({\n            icon: tipo,\n            title: titulo,\n            text: mensaje,\n        }).then(() => {\n            $('.modal').modal('hide');\n            location.reload(); // Recarga la página automáticamente\n        });\n    }        \n}","if (window.location.pathname === '/login') {\n    const btniniciarSesion = document.getElementById('btnIniciarSesion');\n\n    if( btniniciarSesion){\n        btniniciarSesion.addEventListener('click', async function (event) {\n            event.preventDefault();\n\n            const usuario = {\n                email: document.getElementById('email').value.trim(),\n                password: document.getElementById('password').value.trim()\n            };\n\n            if( usuario.email === \"\" || usuario.password === \"\"){\n                mostrarAlerta2('Todos los campos son obligatorios', 'error');\n                return;\n            }\n\n            try {\n                // Crear FormData para enviar los datos\n                const datos = new FormData();\n                Object.entries(usuario).forEach(([key, value]) => datos.append(key, value));\n                const url = 'http://localhost:3000/login';\n                const respuesta = await fetch(url, { // Corregido: Usar un objeto en lugar de un array\n                    method: 'POST',\n                    body: datos\n                });\n\n                // Esperar la respuesta en formato JSON\n                const resultado = await respuesta.json();\n                if(resultado.autorizado){\n                    window.location.href = '/admin/index';\n                } else{\n                    mostrarAlerta2(resultado.mensaje, resultado.tipo);\n                }\n\n            } catch (error) {\n                console.log(error);\n            }\n        })\n    }\n}","// src/js/alertas.js\n(function() {\n    function mostrarAlerta(titulo, mensaje, tipo, urlRedireccion = null) {\n        Swal.fire({\n            icon: tipo,\n            title: titulo,\n            text: mensaje,\n        }).then(() => {\n            $('.modal').modal('hide'); \n            if (urlRedireccion) {\n                window.location.href = urlRedireccion;\n            }\n        });\n    }    \n\n    function mostrarAlerta2(mensaje, tipo) {\n        const mensajeResultado = document.getElementById('mensaje-resultado');\n        mensajeResultado.style.display = 'block';\n        mensajeResultado.textContent = mensaje;\n\n        mensajeResultado.className = `alert alert-${tipo === 'error' ? 'danger' : tipo === 'success' ? 'success' : 'info'}`;\n\n        setTimeout(() => {\n            mensajeResultado.style.display = 'none';\n        }, 5000);\n    }\n\n    function mostrarAlerta3(titulo, mensaje, tipo) {\n            Swal.fire({\n                icon: tipo,\n                title: titulo,\n                text: mensaje,\n                willClose: () => {\n                    // Al cerrar la alerta, recargar la página después de un pequeño retraso\n                    setTimeout(() => {\n                        window.location.reload();\n                    }, 1000); // Ajusta los milisegundos según tu preferencia\n                }\n            }).then(() => {\n                $('.modal').modal('hide'); \n            });\n    }\n\n    function obtenerFechaFormateada() {\n        const fecha = new Date();\n        const year = fecha.getFullYear();\n        const month = String(fecha.getMonth() + 1).padStart(2, '0'); // +1 porque enero es 0\n        const day = String(fecha.getDate()).padStart(2, '0');\n        const hours = String(fecha.getHours()).padStart(2, '0');\n        const minutes = String(fecha.getMinutes()).padStart(2, '0');\n        const seconds = String(fecha.getSeconds()).padStart(2, '0');\n    \n        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n    }\n    \n\n    // Hacerlas accesibles globalmente\n    window.mostrarAlerta = mostrarAlerta;\n    window.mostrarAlerta2 = mostrarAlerta2;\n    window.mostrarAlerta3 = mostrarAlerta3;\n    window.obtenerFechaFormateada = obtenerFechaFormateada;\n})();\n","if(window.location.pathname === '/admin/puntodeventa/catalogo'){\n    \n    let dataTable;\n    let dataTableInit = false;\n\n    // Configuración DataTable\n    const dataTableOption = {\n        destroy: true,\n        pageLength: 5,\n        language: {\n            url: 'https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json',\n        },\n        dom: '<\"row mb-2\"<\"d-flex justify-content-start col-sm-6\"f>>' +  \n             '<\"row\"<\"col-sm-12\"tr>>' + \n             '<\"row d-flex justify-content-between\"<\"col d-flex justify-content-start\"l><\"col d-flex justify-content-center\"i><\"col d-flex justify-content-end\"p>>',\n        columnDefs: [\n            { orderable: false, targets: [4] }  // Desactiva ordenación en Dirección y Estatus\n            //{ visible: false, targets: [7] }       // Oculta la columna Password\n        ]\n    };\n\n    // Ejecutar funciones\n    initDataTable();\n\n    // Inicializamos DataTable\n    async function initDataTable() {\n        if (dataTableInit) {\n            dataTable.destroy(); // Destruye la tabla si ya existe previamente\n        }\n\n        const productos = await listarProductos(); // Esperamos los datos antes de inicializar DataTable\n\n        if (productos.length > 0) {\n            llenarTabla(productos);\n        }\n\n        // Inicializa DataTable\n        dataTable = $('#datatable_productos').DataTable(dataTableOption);\n        dataTableInit = true;\n    }\n\n    // Función para obtener los datos de la API\n    async function listarProductos() {\n        try {\n            const response = await fetch('/api/productos');\n            const productos = await response.json();\n            return productos;\n        } catch (error) {\n            console.error('Error al obtener los productos:', error);\n            return [];\n        }\n    }\n\n    // Función para llenar la tabla con los datos obtenidos\n    function llenarTabla(productos) {\n\n        const tbody = document.getElementById('tableBody_productos');\n        tbody.innerHTML = ''; // Limpiamos el contenido previo\n        //console.log(productos);\n\n        productos.forEach((producto, index) => {\n\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td>${producto.nombre}</td>\n                    <td>${producto.precio}</td>\n                    <td class=\"text-center\">${producto.stock}</td>\n                    <td class=\"text-center\">${producto.categoria_producto_id.nombre}</td>\n                    <td class=\"text-center\">${producto.codigo_barras}</td>\n                    <td class=\"text-center\">${producto.proveedor}</td>\n                    <td><img src=\"/build/img/${producto.foto}.png\" alt=\"Descripción de la imagen\" width=\"65\"></td>\n                    <td>\n                        <!-- Botón de editar que abre el modal -->\n                        <button \n                            class=\"btn btn-sm btn-primary btnEditarProducto\" \n                            data-id=\"${producto.id}\" \n                            data-toggle=\"modal\" \n                            data-target=\"#modalEditarProducto\">\n                            <i class=\"fa-solid fa-pen\"></i>\n                        </button>\n                        <!-- Botón de eliminar -->\n                        <button class=\"btn btn-sm btn-danger btn-eliminarProducto\" data-id=\"${producto.id}\">\n                            <i class=\"fa-solid fa-trash\"></i>\n                        </button>\n                    </td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    // ---------------    LLENAR MODAL PARA ACTUALIZAR  -----------------\n    document.addEventListener('click', async function (event) {\n        if (event.target.closest('.btnEditarProducto')) {\n            \n            const boton = event.target.closest('.btnEditarProducto');\n            const productoId = boton.dataset.id;\n            \n            try {\n                // Obtener los datos del usuario desde la API o una variable global\n                const respuesta = await fetch(`/api/productos/${productoId}`);\n                if (!respuesta.ok) {\n                    throw new Error(`Error al obtener usuario: ${respuesta.statusText}`);\n                }\n    \n                const producto = await respuesta.json();\n                // Llenar los campos del modal con los datos del producto\n                document.getElementById('nombreEditar').value = producto.nombre;\n                document.getElementById('precioEditar').value = producto.precio;\n                document.getElementById('stockEditar').value = producto.stock;\n                document.getElementById('categoria_idEditar').value = producto.categoria_producto_id;\n                document.getElementById('codigo_barrasEditar').value = producto.codigo_barras;\n                document.getElementById('proveedorEditar').value = producto.proveedor;\n                \n                // Mostrar la imagen si existe\n                const imgElement = document.getElementById('imgEditarP');\n                imgElement.src = producto.foto ? `/build/img/${producto.foto}.png` : '/build/img/default.png';                    \n    \n                // Guardar el ID en el botón de actualización\n                document.querySelector('.btnActualizarProducto').dataset.id = productoId;\n        \n            } catch (error) {\n                console.error('Error al obtener los datos del producto:', error);\n            }\n        }\n    });\n\n    // ---------------    ACTUALIZAR PRODUCTO     -----------------\n    document.getElementById('formEditarProducto').addEventListener('submit', async function (e) {\n        e.preventDefault();\n    \n        const productoId = document.querySelector('.btnActualizarProducto').dataset.id;\n    \n        const productoActualizado = {\n            nombre: document.getElementById('nombreEditar').value.trim(),\n            precio: document.getElementById('precioEditar').value.trim(),\n            stock: document.getElementById('stockEditar').value.trim(),\n            categoria_producto_id: document.getElementById('categoria_idEditar').value.trim(),\n            codigo_barras: document.getElementById('codigo_barrasEditar').value.trim(),\n            proveedor: document.getElementById('proveedorEditar').value.trim(),\n            foto: document.getElementById('fotoP').files[0]\n        };\n\n        //console.log(productoActualizado);\n        //  return;\n    \n        if (!productoActualizado.nombre || !productoActualizado.precio || !productoActualizado.categoria_producto_id) {\n            mostrarAlerta('Error', 'No pueden ir vacios.', 'error');\n            return;\n        }\n\n        try {\n            const datos = new FormData();\n            Object.entries(productoActualizado).forEach(([key, value]) => datos.append(key, value));\n            const respuesta = await fetch(`/api/productos/${productoId}`, {\n                method: 'POST',\n                body: datos\n            });\n    \n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            const inputFile = document.getElementById('fotoP');\n            inputFile.value = ''; // Intenta resetear primero\n            if (inputFile.value) { \n                inputFile.parentNode.replaceChild(inputFile.cloneNode(true), inputFile);\n            }\n\n            initDataTable();\n    \n        } catch (error) {\n            console.error('Error al actualizar producto:', error);\n        }\n    });\n\n    // Delegación de eventos para eliminación de niveles\n    document.getElementById('tableBody_productos').addEventListener('click', async function (event) {\n        if (event.target.closest('.btn-eliminarProducto')) {\n            const productoId = event.target.closest('.btn-eliminarProducto').getAttribute('data-id');\n            const result = await Swal.fire({\n                title: '¿Estás seguro?',\n                text: \"Esta acción no se puede deshacer.\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#d33',\n                cancelButtonColor: '#3085d6',\n                confirmButtonText: 'Sí, eliminar',\n                cancelButtonText: 'Cancelar'\n            });\n\n            if (result.isConfirmed) {\n                try {\n                    const url = `/api/productos/${productoId}`;\n                    const respuesta = await fetch(url, {\n                        method: 'DELETE',\n                    });\n\n                    const resultado = await respuesta.json();\n                    mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n\n                    if (resultado.tipo === 'success') {\n                        await initDataTable();\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n    });\n\n    //  --------------    CREAR NUEVO PRODUCTO     ----------------\n    const botonSubirUsuario = document.querySelector('.btnSubirProducto');\n    botonSubirUsuario.addEventListener('click', async function (e) {\n        e.preventDefault();\n        // alert('click');\n        // return;\n\n        const productoNuevo = {\n            nombre: document.getElementById('nombre').value.trim(),\n            precio: document.getElementById('precio').value.trim(),\n            stock: document.getElementById('stock').value.trim(),\n            categoria_producto_id: document.getElementById('categoria_id').value.trim(),\n            codigo_barras: document.getElementById('codigo_barras').value.trim(),\n            proveedor: document.getElementById('proveedor').value.trim(),\n            foto: document.getElementById('fotoPN').files[0]\n        };\n\n        // console.log(productoNuevo);\n        // return;\n\n        if (productoNuevo.nombre === \"\" || productoNuevo.precio === \"\" || productoNuevo.stock === \"\" || productoNuevo.categoria_producto_id === \"\" || productoNuevo.codigo_barras === \"\") {\n            mostrarAlerta2('Todos los campos son necesarios', 'error');\n            return;\n        }\n\n        if (productoNuevo.codigo_barras.length != 12) {\n            mostrarAlerta2('Codigo UPC INvalido', 'error');\n            return;\n        }\n\n        try {\n            const datos = new FormData();\n            Object.entries(productoNuevo).forEach(([key, value]) => datos.append(key, value));\n            const respuesta = await fetch('/api/productos', {\n                method: 'POST',\n                body: datos\n            });\n\n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n\n        } catch (error) {\n            console.error('Error en la solicitud:', error);\n        }\n    });\n}","if(window.location.pathname === '/admin/configuracion/categorias'){\n    \n    let dataTable;\n    let dataTableInit = false;\n\n    const estatusDictionary = {\n        0: 'Inactivo',\n        1: 'Activo'\n    };\n\n    // Configuración DataTable\n    const dataTableOption = {\n        destroy: true,\n        pageLength: 5,\n        language: {\n            url: 'https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json',\n        },\n        dom: '<\"row mb-2\"<\"d-flex justify-content-start col-sm-6\"f>>' +  \n             '<\"row\"<\"col-sm-12\"tr>>' + \n             '<\"row d-flex justify-content-between\"<\"col d-flex justify-content-start\"l><\"col d-flex justify-content-center\"i><\"col d-flex justify-content-end\"p>>',\n        columnDefs: [\n            { orderable: false, targets: [7] }  // Desactiva ordenación en Dirección y Estatus\n            //{ visible: false, targets: [7] }       // Oculta la columna Password\n        ]\n    };\n\n    // Ejecutar funciones\n    initDataTable();\n\n    // Inicializamos DataTable\n    async function initDataTable() {\n        if (dataTableInit) {\n            dataTable.destroy(); // Destruye la tabla si ya existe previamente\n        }\n\n        const categorias = await listarCategorias(); // Esperamos los datos antes de inicializar DataTable\n\n        if (categorias.length > 0) {\n            llenarTabla(categorias);\n        }\n\n        // Inicializa DataTable\n        dataTable = $('#datatable_categorias').DataTable(dataTableOption);\n        dataTableInit = true;\n    }\n\n    // Función para obtener los datos de la API\n    async function listarCategorias() {\n        try {\n            const response = await fetch('/api/categorias');\n    \n            if (response.status === 204) {\n                return []; // No hay contenido, devolvemos un array vacío\n            }\n    \n            if (!response.ok) {\n                throw new Error(`Error HTTP: ${response.status}`);\n            }\n    \n            return await response.json();\n        } catch (error) {\n            console.error('Error al obtener categorías:', error);\n            return null;\n        }\n    }\n    \n    // Delegación de eventos para eliminación de categorias\n    document.getElementById('tableBody_categorias').addEventListener('click', async function (event) {\n        if (event.target.closest('.btn-eliminarCategoria')) {\n            const categoriaId = event.target.closest('.btn-eliminarCategoria').getAttribute('data-id');\n            const result = await Swal.fire({\n                title: '¿Estás seguro?',\n                text: \"Esta acción no se puede deshacer.\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#d33',\n                cancelButtonColor: '#3085d6',\n                confirmButtonText: 'Sí, eliminar',\n                cancelButtonText: 'Cancelar'\n            });\n\n            if (result.isConfirmed) {\n                try {\n                    const url = `/api/categorias/${categoriaId}`;\n                    const respuesta = await fetch(url, {\n                        method: 'DELETE',\n                    });\n\n                    const resultado = await respuesta.json();\n                    mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n\n                    if (resultado.tipo === 'success') {\n                        await initDataTable();\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n    });\n\n    // Función para llenar la tabla con los datos obtenidos\n    function llenarTabla(categorias) {\n        const tbody = document.getElementById('tableBody_categorias');\n        tbody.innerHTML = ''; // Limpiamos el contenido previo\n\n        categorias.forEach((categoria, index) => {\n            const estatus = estatusDictionary[categoria.estado] || 'Desconocido';\n\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td>${categoria.nombre}</td>\n                    <td class=\"text-center\">${categoria.capacidad_maxima}</td>\n                    <td>${categoria.tipo_cama}</td>\n                    <td>${categoria.precio_base}</td>\n                    <td>${categoria.servicios_incluidos}</td>\n                    <td>${estatus}</td>\n                    <td>\n                        <!-- Botón de editar que abre el modal -->\n                        <button \n                            class=\"btn btn-sm btn-primary btnEditarCategoria\" \n                            data-id=\"${categoria.id}\" \n                            data-toggle=\"modal\" \n                            data-target=\"#modalEditarCategoria\">\n                            <i class=\"fa-solid fa-pen\"></i>\n                        </button>\n                        <!-- Botón de eliminar -->\n                        <button class=\"btn btn-sm btn-danger btn-eliminarCategoria\" data-id=\"${categoria.id}\">\n                            <i class=\"fa-solid fa-trash\"></i>\n                        </button>\n                    </td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    // Variable global para almacenar la categoria original\n    let categoriaOriginal = null;\n\n    // ---------------------------    LLENAR MODAL PARA ACTUALIZAR    ------------------------------\n    document.addEventListener('click', async function (e) {\n        if(e.target.closest('.btnEditarCategoria')) { //boton editar que abre modal\n            const boton = e.target.closest('.btnEditarCategoria');\n            const categoriaId = boton.dataset.id;\n            categoriaOriginal = null;\n\n            try {\n                \n                // Obtener datos de la categoria desde la API\n                const url = `/api/categorias/${categoriaId}`;\n                const respuesta = await fetch(url);\n                if(!respuesta.ok){\n                    throw new Error(`Error al obtener categoria: ${respuesta.statusText}`);\n                }\n                const categoria = await respuesta.json();\n                categoriaOriginal = { ...categoria }; // Guarda en la variable global\n\n                // Llenar campos del modal con los datos de la categoria\n                document.getElementById('nombreEditar').value = categoria.nombre;\n                document.getElementById('capacidad_maximaEditar').value = categoria.capacidad_maxima;\n                document.getElementById('tipo_camaEditar').value = categoria.tipo_cama;\n                document.getElementById('precio_baseEditar').value = categoria.precio_base;\n                document.getElementById('servicios_incluidosEditar').value = categoria.servicios_incluidos;\n                document.getElementById('estadoEditar').value = categoria.estado;\n\n                // Guardar el ID de la categoria en el botón de actualización\n                document.querySelector('.btnActualizarCategoria').dataset.id = categoriaId;\n\n            } catch (error) {\n                console.log('Error al obtener los datos de la categoria:', error);\n            }\n        }\n    });\n\n    // ------------------------     ACTUALIZAR CATEGORIA    ------------------------\n    document.getElementById('formEditarCategoria').addEventListener('submit', async function (e) {\n\n        e.preventDefault();\n\n        const categoriaId = document.querySelector('.btnActualizarCategoria').dataset.id;\n\n        const categoriaActualizada = {\n            nombre: document.getElementById('nombreEditar').value.trim(),\n            capacidad_maxima: document.getElementById('capacidad_maximaEditar').value.trim(),\n            tipo_cama: document.getElementById('tipo_camaEditar').value.trim(),\n            precio_base: document.getElementById('precio_baseEditar').value.trim(),\n            servicios_incluidos: document.getElementById('servicios_incluidosEditar').value.trim(),\n            estado: document.getElementById('estadoEditar').value.trim()\n        }\n\n        if (!categoriaOriginal) {\n            console.error('Error: No hay datos originales de la categoria');\n            mostrarAlerta('Error', 'No se pudieron comparar los datos originales', 'error');\n            return;\n        }\n\n        //Comparar con los datos originales\n        let cambios = {};\n        if (categoriaActualizada.nombre !== categoriaOriginal.nombre) cambios.nombre = categoriaActualizada.nombre;\n        if (categoriaActualizada.capacidad_maxima !== categoriaOriginal.capacidad_maxima) cambios.capacidad_maxima = categoriaActualizada.capacidad_maxima;\n        if (categoriaActualizada.tipo_cama !== categoriaOriginal.tipo_cama) cambios.tipo_cama = categoriaActualizada.tipo_cama;\n        if (categoriaActualizada.precio_base !== categoriaOriginal.precio_base) cambios.precio_base = categoriaActualizada.precio_base;\n        if (categoriaActualizada.servicios_incluidos !== categoriaOriginal.servicios_incluidos) cambios.servicios_incluidos = categoriaActualizada.servicios_incluidos;\n        if (categoriaActualizada.estado !== categoriaOriginal.estado) cambios.estado = categoriaActualizada.estado;\n\n        // Si no hay cambios, no se envia la peticion\n        if(Object.keys(cambios).length === 0){\n            mostrarAlerta2('No hay cambios por enviar', 'error');\n            return;\n        }\n\n        // Determinar si es PUT O PATCH\n        const metodo = Object.keys(cambios).length === 6 ? 'PUT' : 'PATCH';\n        const datos = metodo === 'PUT' ? categoriaActualizada : cambios;\n\n        try {\n            // Enviar la actualizacion al servidor\n            const url = `/api/categorias/${categoriaId}`;\n            const respuesta = await fetch(url, {\n                method: metodo,\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(datos)\n            });\n\n            if(!respuesta.ok){\n                const errorData = await respuestaUpdate.json();\n                throw new Error(errorData.mensaje || 'Error desconocido al actualizar');\n            }\n\n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n            \n        } catch (error) {\n            console.error('Error al actualizar nivel:', error);\n            mostrarAlerta('Error', error.message, 'error');\n        }\n    });\n\n    //  --------------    CREAR NUEVO NIVEL     ----------------\n    const botonSubirCategoria = document.querySelector('.btnSubirCategoria');\n    botonSubirCategoria.addEventListener('click', async function (e) {\n        e.preventDefault();\n\n        const categoriaNueva = {\n            nombre: document.getElementById('nombre').value.trim(),\n            capacidad_maxima: document.getElementById('capacidad_maxima').value.trim(),\n            tipo_cama: document.getElementById('tipo_cama').value.trim(),\n            precio_base: document.getElementById('precio_base').value.trim(),\n            servicios_incluidos: document.getElementById('servicios_incluidos').value.trim(),\n            estado: document.getElementById('estado').value.trim()\n        };\n\n        if (categoriaNueva.nombre === \"\" || categoriaNueva.capacidad_maxima === \"\" || categoriaNueva.tipo_cama === \"\" || categoriaNueva.precio_base === \"\") {\n            mostrarAlerta2('Todos los campos son necesarios', 'error');\n            return;\n        }\n        \n        try {\n            const datos = new FormData();\n            Object.entries(categoriaNueva).forEach(([key, value]) => datos.append(key, value));\n            const respuesta = await fetch('/api/categorias', {\n                method: 'POST',\n                body: datos\n            });\n\n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n\n            // Limpiar los campos del formulario\n            document.getElementById('nombre').value = '';\n            document.getElementById('capacidad_maxima').value = '';\n            document.getElementById('tipo_cama').value = '';\n            document.getElementById('servicios_incluidos').value = '';\n            document.getElementById('precio_base').value = '';\n            document.getElementById('estatado').value = '';\n\n        } catch (error) {\n            console.error('Error en la solicitud:', error);\n        }\n    });\n}","if (window.location.pathname === '/admin/salidas/checkout') {\n\n    const params = new URLSearchParams(window.location.search);\n    const idReserva = params.get(\"id\");\n\n    // Elementos del DOM\n    const inputPenalidad = document.getElementById('inputPenalidad');\n    const totalPagarElement = document.getElementById('totalPagar');\n    const metodoPagoSelect = document.getElementById('metodoPago');\n    const btnTerminarReservacion = document.getElementById('btnTerminarReservacion');\n    const grupoEfectivo = document.getElementById('grupoEfectivo');\n    const cantidadEfectivoInput = document.getElementById('cantidadEfectivo');\n    const feriaCalculadaInput = document.getElementById('feriaCalculada');\n\n    // Obtener y guardar el total original\n    const totalOriginal = parseFloat(totalPagarElement.innerText.replace(/,/g, ''));\n    let totalActual = totalOriginal; // se actualizará dinámicamente\n\n    // Función para actualizar el total y mostrar u ocultar el select\n    const actualizarTotalYMetodoPago = () => {\n        let penalidad = parseFloat(inputPenalidad.value);\n        totalActual = totalOriginal;\n\n        if (!isNaN(penalidad)) {\n            totalActual += penalidad;\n        }\n\n        // Actualiza el texto del total\n        totalPagarElement.innerText = totalActual.toLocaleString('es-MX', {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n        });\n\n        // Mostrar u ocultar el <select>\n        metodoPagoSelect.style.display = (totalActual > 0) ? 'block' : 'none';\n\n        // Ocultar la sección de efectivo si el total es 0 o menos\n        if (totalActual <= 0) {\n            grupoEfectivo.classList.add('d-none');\n        }\n    };\n\n    // Mostrar u ocultar sección de efectivo según método de pago\n    metodoPagoSelect.addEventListener('change', () => {\n        if (metodoPagoSelect.value === 'efectivo' && totalActual > 0) {\n            grupoEfectivo.classList.remove('d-none');\n        } else {\n            grupoEfectivo.classList.add('d-none');\n            cantidadEfectivoInput.value = '';\n            feriaCalculadaInput.value = '';\n        }\n    });\n\n    // Calcular feria (cambio) al ingresar la cantidad pagada\n    cantidadEfectivoInput.addEventListener('input', () => {\n        const cantidad = parseFloat(cantidadEfectivoInput.value);\n\n        if (!isNaN(cantidad) && cantidad >= totalActual) {\n            const feria = cantidad - totalActual;\n            feriaCalculadaInput.value = feria.toLocaleString('es-MX', {\n                minimumFractionDigits: 2,\n                maximumFractionDigits: 2\n            });\n        } else {\n            feriaCalculadaInput.value = '';\n        }\n    });\n\n    // Validación al hacer clic en \"Terminar reservación\"\n    btnTerminarReservacion.addEventListener('click', async function (e) {\n        if (totalActual > 0) {\n            if (metodoPagoSelect.value === '') {\n                e.preventDefault();\n                alert('Por favor, selecciona un método de pago.');\n                return;\n            }\n    \n            if (metodoPagoSelect.value === 'efectivo') {\n                const cantidad = parseFloat(cantidadEfectivoInput.value);\n                if (isNaN(cantidad) || cantidad < totalActual) {\n                    e.preventDefault();\n                    alert('La cantidad en efectivo es insuficiente para cubrir el total.');\n                    return;\n                }\n            }\n            \n            const penalidad = parseFloat(inputPenalidad.value) || 0;\n            \n            const datos = {\n                id_reserva: idReserva,\n                penalidad: penalidad,\n                deudas_liquidadas: true\n            };\n    \n            const respuesta = await fetch('/api/reservacion/terminar', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(datos)\n            });\n    \n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo, '/admin/salidas');\n            return;\n        }\n    \n        // Total es 0, terminar reservación sin pago\n        const datos = {\n            id_reserva: idReserva,\n            penalidad: 0,\n            deudas_liquidadas: true\n        };\n    \n        const respuesta = await fetch('/api/reservacion/terminar', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(datos)\n        });\n    \n        const resultado = await respuesta.json();\n        mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo, '/admin/salidas');\n    });\n\n    // Ejecutar al cargar\n    actualizarTotalYMetodoPago();\n    inputPenalidad.addEventListener('input', actualizarTotalYMetodoPago);\n}\n","if(window.location.pathname === '/admin/clientes'){\n    \n    let dataTable;\n    let dataTableInit = false;\n\n    // Configuración DataTable\n    const dataTableOption = {\n        destroy: true,\n        pageLength: 5,\n        language: {\n            url: 'https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json',\n        },\n        dom: '<\"row mb-2\"<\"d-flex justify-content-start col-sm-6\"f>>' +  \n             '<\"row\"<\"col-sm-12\"tr>>' + \n             '<\"row d-flex justify-content-between\"<\"col d-flex justify-content-start\"l><\"col d-flex justify-content-center\"i><\"col d-flex justify-content-end\"p>>',\n        columnDefs: [\n            { orderable: false, targets: [6,7] }  // Desactiva ordenación en Dirección y Estatus\n            //{ visible: false, targets: [7] }       // Oculta la columna Password\n        ]\n    };\n\n    // Ejecutar funciones\n    initDataTable();\n\n    // Inicializamos DataTable\n    async function initDataTable() {\n        if (dataTableInit) {\n            dataTable.destroy(); // Destruye la tabla si ya existe previamente\n        }\n\n        const clientes = await listarClientes(); // Esperamos los datos antes de inicializar DataTable\n\n        if (clientes.length > 0) {\n            llenarTabla(clientes);\n        }\n\n        // Inicializa DataTable\n        dataTable = $('#datatable_clientes').DataTable(dataTableOption);\n        dataTableInit = true;\n    }\n\n    // Función para obtener los datos de la API\n    async function listarClientes() {\n        try {\n            const response = await fetch('/api/clientes');\n    \n            if (response.status === 204) {\n                return []; // No hay contenido, devolvemos un array vacío\n            }\n    \n            if (!response.ok) {\n                throw new Error(`Error HTTP: ${response.status}`);\n            }\n    \n            return await response.json();\n        } catch (error) {\n            console.error('Error al obtener clientes:', error);\n            return null;\n        }\n    }\n\n    // Función para llenar la tabla con los datos obtenidos\n    function llenarTabla(clientes) {\n        const tbody = document.getElementById('tableBody_clientes');\n        tbody.innerHTML = ''; // Limpiamos el contenido previo\n\n        clientes.forEach((cliente, index) => {\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td>${cliente.nombre}</td>\n                    <td>${cliente.apellidos}</td>\n                    <td>${cliente.telefono}</td>\n                    <td>${cliente.correo}</td>\n                    <td>${cliente.direccion}</td>\n                    <td>${cliente.documento_identidad}</td>\n                    <td>\n                        <!-- Botón de editar que abre el modal -->\n                        <button \n                            class=\"btn btn-sm btn-primary btnEditarCliente\" \n                            data-id=\"${cliente.id}\" \n                            data-toggle=\"modal\" \n                            data-target=\"#modalEditarCliente\">\n                            <i class=\"fa-solid fa-pen\"></i>\n                        </button>\n                        <!-- Botón de eliminar -->\n                        <button class=\"btn btn-sm btn-danger btn-eliminarCliente\" data-id=\"${cliente.id}\">\n                            <i class=\"fa-solid fa-trash\"></i>\n                        </button>\n                    </td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    // Variable global para almacenar el nivel original\n    let clienteOriginal = null;\n\n    // --------------- LLENAR MODAL PARA ACTUALIZAR -----------------\n    document.addEventListener('click', async function (event) {\n        if (event.target.closest('.btnEditarCliente')) {\n            const boton = event.target.closest('.btnEditarCliente');\n            const clientesId = boton.dataset.id;\n            clienteOriginal= '';\n            try {\n                // Obtener los datos del nivel desde la API\n                const respuesta = await fetch(`/api/clientes/${clientesId}`);\n                if (!respuesta.ok) {\n                    throw new Error(`Error al obtener cliente: ${respuesta.statusText}`);\n                }\n                const cliente = await respuesta.json();\n                clienteOriginal = { ...cliente }; // Guardar en variable global\n\n                // Llenar los campos del modal con los datos del cliente\n                document.getElementById('nombre').value = cliente.nombre;\n                document.getElementById('apellidos').value = cliente.apellidos;\n                document.getElementById('direccion').value = cliente.direccion;\n                document.getElementById('correo').value = cliente.correo;\n                document.getElementById('telefono').value = cliente.telefono;\n                document.getElementById('documento_identidad').value = cliente.documento_identidad;\n\n                // Guardar el ID en el botón de actualización\n                document.querySelector('.btnActualizarCliente').dataset.id = clientesId;\n\n            } catch (error) {\n                console.error('Error al obtener los datos del cliente:', error);\n            }\n        }\n    });\n\n    // --------------- ACTUALIZAR CLIENTE -----------------\n    document.getElementById('formEditarCliente').addEventListener('submit', async function (e) {\n        e.preventDefault();\n    \n        const clienteId = document.querySelector('.btnActualizarCliente').dataset.id;\n\n        const clienteActualizado = {\n            nombre: document.getElementById('nombre').value.trim(),\n            apellidos: document.getElementById('apellidos').value.trim(),\n            telefono: document.getElementById('telefono').value.trim(),\n            correo: document.getElementById('correo').value.trim(),\n            direccion: document.getElementById('direccion').value.trim(),\n            documento_identidad: document.getElementById('documento_identidad').value.trim()\n        };\n\n        if (!clienteOriginal) {\n            console.error('Error: No hay datos originales del cliente');\n            mostrarAlerta('Error', 'No se pudieron comparar los datos originales', 'error');\n            return;\n        }\n\n        // Comparar con los datos originales sin hacer otra petición\n        let cambios = {};\n        if (clienteActualizado.nombre !== clienteOriginal.nombre) cambios.nombre = clienteActualizado.nombre;\n        if (clienteActualizado.apellidos !== clienteOriginal.apellidos) cambios.apellidos = clienteActualizado.apellidos;\n        if (clienteActualizado.telefono !== clienteOriginal.telefono) cambios.telefono = clienteActualizado.telefono;\n        if (clienteActualizado.correo !== clienteOriginal.correo) cambios.correo = clienteActualizado.correo;\n        if (clienteActualizado.direccion !== clienteOriginal.direccion) cambios.direccion = clienteActualizado.direccion;\n        if (clienteActualizado.documento_identidad !== clienteOriginal.documento_identidad) cambios.documento_identidad = clienteActualizado.documento_identidad;\n\n        // Si no hay cambios, no enviamos la petición\n        if (Object.keys(cambios).length === 0) {\n            mostrarAlerta2('No hay cambios por enviar', 'error');\n            return;\n        }\n\n        // Determinar si usar PUT o PATCH\n        const metodo = Object.keys(cambios).length === 6 ? \"PUT\" : \"PATCH\";\n        const datos = metodo === \"PUT\" ? clienteActualizado : cambios;\n\n        try {\n            // Enviar la actualización con una sola petición\n            const respuestaUpdate = await fetch(`/api/clientes/${clienteId}`, {\n                method: metodo,\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(datos)\n            });\n\n            if (!respuestaUpdate.ok) {\n                const errorData = await respuestaUpdate.json();\n                throw new Error(errorData.mensaje || 'Error desconocido al actualizar');\n            }\n\n            const resultado = await respuestaUpdate.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n\n        } catch (error) {\n            console.error('Error al actualizar cliente:', error);\n            mostrarAlerta('Error', error.message, 'error');\n        }\n    });\n\n    // Delegación de eventos para eliminación de clientes\n    document.getElementById('tableBody_clientes').addEventListener('click', async function (event) {\n        if (event.target.closest('.btn-eliminarCliente')) {\n            const clienteId = event.target.closest('.btn-eliminarCliente').getAttribute('data-id');\n            const result = await Swal.fire({\n                title: '¿Estás seguro?',\n                text: \"Esta acción no se puede deshacer.\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#d33',\n                cancelButtonColor: '#3085d6',\n                confirmButtonText: 'Sí, eliminar',\n                cancelButtonText: 'Cancelar'\n            });\n\n            if (result.isConfirmed) {\n                try {\n                    const url = `/api/clientes/${clienteId}`;\n                    const respuesta = await fetch(url, {\n                        method: 'DELETE',\n                    });\n\n                    const resultado = await respuesta.json();\n                    mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n\n                    if (resultado.tipo === 'success') {\n                        await initDataTable();\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n    });\n}","if(window.location.pathname === '/admin/configuracion/habitaciones'){\n\n    let dataTable;\n    let dataTableInit = false;\n\n    const estatusDictionary = {\n        0: 'Inactivo',\n        1: 'Activo'\n    };\n\n    // Configuración DataTable\n    const dataTableOption = {\n        destroy: true,\n        pageLength: 5,\n        language: {\n            url: 'https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json',\n        },\n        dom: '<\"row mb-2\"<\"d-flex justify-content-start col-sm-6\"f>>' +  \n             '<\"row\"<\"col-sm-12\"tr>>' + \n             '<\"row d-flex justify-content-between\"<\"col d-flex justify-content-start\"l><\"col d-flex justify-content-center\"i><\"col d-flex justify-content-end\"p>>',\n        columnDefs: [\n            { orderable: false, targets: [4] }  // Desactiva ordenación en Dirección y Estatus\n            //{ visible: false, targets: [7] }       // Oculta la columna Password\n        ]\n    };\n\n    // Ejecutar funciones\n    initDataTable();\n\n    // Inicializamos DataTable\n    async function initDataTable() {\n        if (dataTableInit) {\n            dataTable.destroy(); // Destruye la tabla si ya existe previamente\n        }\n\n        const habitaciones = await listarhabitaciones(); // Esperamos los datos antes de inicializar DataTable\n\n        if (habitaciones.length > 0) {\n            llenarTabla(habitaciones);\n        }\n\n        // Inicializa DataTable\n        dataTable = $('#datatable_habitaciones').DataTable(dataTableOption);\n        dataTableInit = true;\n    }\n\n    // Función para obtener los datos de la API\n    async function listarhabitaciones() {\n        try {\n            const response = await fetch('/api/habitaciones');\n            const habitaciones = await response.json();\n            return habitaciones;\n        } catch (error) {\n            console.error('Error al obtener habitaciones:', error);\n            return [];\n        }\n    }\n\n    // Función para llenar la tabla con los datos obtenidos\n    function llenarTabla(habitaciones) {\n        const tbody = document.getElementById('tableBody_habitaciones');\n        tbody.innerHTML = ''; // Limpiamos el contenido previo\n\n        habitaciones.forEach((habitacion) => {\n            const estatus = estatusDictionary[habitacion.estatus] || 'Desconocido';\n\n            const row = `\n                <tr>\n                    <td>${habitacion.numero}</td>\n                    <td>${habitacion.id_nivel.nombre}</td>\n                    <td>${habitacion.id_categoria.nombre}</td>\n                    <td>${habitacion.id_categoria.precio_base}</td>\n                    <td>${habitacion.id_categoria.servicios_incluidos}</td>\n                    <td>${habitacion.detalles_personalizados}</td>\n                    <td class=\"text-center\">${estatus}</td>\n                    <td>\n                        <!-- Botón de editar que abre el modal -->\n                        <button \n                            class=\"btn btn-sm btn-primary btnEditarHabitacion\" \n                            data-id=\"${habitacion.id}\" \n                            data-toggle=\"modal\" \n                            data-target=\"#modalEditarHabitacion\">\n                            <i class=\"fa-solid fa-pen\"></i>\n                        </button>\n                        <!-- Botón de eliminar -->\n                        <button class=\"btn btn-sm btn-danger btn-eliminarHabitacion\" data-id=\"${habitacion.id}\">\n                            <i class=\"fa-solid fa-trash\"></i>\n                        </button>\n                    </td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    // Delegación de eventos para eliminación de niveles\n    document.getElementById('tableBody_habitaciones').addEventListener('click', async function (event) {\n        if (event.target.closest('.btn-eliminarHabitacion')) {\n            const habitacionId = event.target.closest('.btn-eliminarHabitacion').getAttribute('data-id');\n            const result = await Swal.fire({\n                title: '¿Estás seguro?',\n                text: \"Esta acción no se puede deshacer.\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#d33',\n                cancelButtonColor: '#3085d6',\n                confirmButtonText: 'Sí, eliminar',\n                cancelButtonText: 'Cancelar'\n            });\n\n            if (result.isConfirmed) {\n                try {\n                    const url = `/api/habitaciones/${habitacionId}`;\n                    const respuesta = await fetch(url, {\n                        method: 'DELETE',\n                    });\n\n                    const resultado = await respuesta.json();\n                    mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n\n                    if (resultado.tipo === 'success') {\n                        await initDataTable();\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n    });\n\n\n    // Variable global para almacenar el habitacion original\n    let habitacionOriginal = null;\n\n    // --------------- LLENAR MODAL PARA ACTUALIZAR -----------------\n    document.addEventListener('click', async function (event) {\n        if (event.target.closest('.btnEditarHabitacion')) {\n            const boton = event.target.closest('.btnEditarHabitacion');\n            const habitacionId = boton.dataset.id;\n            habitacionOriginal = '';\n    \n            try {\n                const respuesta = await fetch(`/api/habitaciones/${habitacionId}`);\n                if (!respuesta.ok) {\n                    throw new Error(`Error al obtener habitación: ${respuesta.statusText}`);\n                }\n                const habitacion = await respuesta.json();\n                console.log(habitacion);\n    \n                habitacionOriginal = { ...habitacion }; // Guardar en variable global\n    \n                // Llenar los campos del modal con los datos de la habitación\n                document.getElementById('numeroEditar').value = habitacion.numero;\n                document.getElementById('id_nivelEditar').value = habitacion.id_nivel.id; // Aquí se asigna el ID del habitacion\n                document.getElementById('id_categoriaEditar').value = habitacion.id_categoria.id; // Aquí el ID de la categoría\n                document.getElementById('detalles_personalizadosEditar').value = habitacion.detalles_personalizados;\n                document.getElementById('estatusEditar').value = habitacion.estatus;\n\n                // Guardar el ID en el botón de actualización\n                document.querySelector('.btnActualizarHabitacion').dataset.id = habitacionId;\n    \n            } catch (error) {\n                console.error('Error al obtener los datos de la habitación:', error);\n            }\n        }\n    });\n    \n    // --------------- ACTUALIZAR HABITACION -----------------\n    document.getElementById('formEditarHabitacion').addEventListener('submit', async function (e) {\n        e.preventDefault();\n\n        const habitacionId = document.querySelector('.btnActualizarHabitacion').dataset.id;\n\n        const habitacionActualizada = {\n            numero: document.getElementById('numeroEditar').value.trim(),\n            id_nivel: document.getElementById('id_nivelEditar').value.trim(),\n            id_categoria: document.getElementById('id_categoriaEditar').value.trim(),\n            detalles_personalizados: document.getElementById('detalles_personalizadosEditar').value.trim(),\n            estatus: document.getElementById('estatusEditar').value.trim()\n        };\n\n        // console.log(habitacionActualizada);\n        // return;\n\n        if (!habitacionOriginal) {\n            console.error('Error: No hay datos originales del habitacion');\n            mostrarAlerta('Error', 'No se pudieron comparar los datos originales', 'error');\n            return;\n        }\n\n        // Comparar con los datos originales sin hacer otra petición\n        let cambios = {};\n        if (habitacionActualizada.numero !== habitacionOriginal.numero) cambios.numero = habitacionActualizada.numero;\n        if (habitacionActualizada.id_nivel !== habitacionOriginal.id_nivel) cambios.id_nivel = habitacionActualizada.id_nivel;\n        if (habitacionActualizada.id_categoria !== habitacionOriginal.id_categoria) cambios.id_categoria = habitacionActualizada.id_categoria;\n        if (habitacionActualizada.detalles_personalizados !== habitacionOriginal.detalles_personalizados) cambios.detalles_personalizados = habitacionActualizada.detalles_personalizados;\n        if (habitacionActualizada.estatus !== habitacionOriginal.estatus) cambios.estatus = habitacionActualizada.estatus;\n\n        // Si no hay cambios, no enviamos la petición\n        if (Object.keys(cambios).length === 0) {\n            mostrarAlerta2('No hay cambios por enviar', 'error');\n            return;\n        }\n        const datos = habitacionActualizada;\n\n        try {\n            // Enviar la actualización con una sola petición\n            const respuestaUpdate = await fetch(`/api/habitaciones/${habitacionId}`, {\n                method: 'PATCH',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(datos)\n            });\n\n            if (!respuestaUpdate.ok) {\n                const errorData = await respuestaUpdate.json();\n                throw new Error(errorData.mensaje || 'Error desconocido al actualizar');\n            }\n\n            const resultado = await respuestaUpdate.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n\n        } catch (error) {\n            console.error('Error al actualizar habitacion:', error);\n            mostrarAlerta('Error', error.message, 'error');\n        }\n    });\n\n    //  --------------     CREAR NUEVa HABITACION     ----------------\n    const botonSubirHabitacion = document.querySelector('.btnSubirHabitacion');\n    botonSubirHabitacion.addEventListener('click', async function (e) {\n        e.preventDefault();\n\n        const habitacionNueva = {\n\n            numero: document.getElementById('numero').value.trim(),\n            id_nivel: document.getElementById('id_nivel').value.trim(),\n            id_categoria: document.getElementById('id_categoria').value.trim(),\n            detalles_personalizados: document.getElementById('detalles_personalizados').value.trim(),\n            estatus: document.getElementById('estatus').value.trim()\n        \n        };\n\n        if (habitacionNueva.id_nivel === \"\" || habitacionNueva.numero === \"\" || habitacionNueva.id_categoria === \"\") {\n            mostrarAlerta2('Todos los campos son necesarios', 'error');\n            return;\n        }\n        \n        try {\n            const datos = new FormData();\n            Object.entries(habitacionNueva).forEach(([key, value]) => datos.append(key, value));\n            const respuesta = await fetch('/api/habitaciones', {\n                method: 'POST',\n                body: datos\n            });\n\n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n\n            // Limpiar los campos del formulario después de crear una habitación\n            document.getElementById('numero').value = '';\n            document.getElementById('detalles_personalizados').value = '';\n            document.getElementById('estatus').value = '1';\n\n        } catch (error) {\n            console.error('Error en la solicitud:', error);\n        }\n    });\n\n}\n","document.addEventListener(\"DOMContentLoaded\", function() {\n    var ctx = document.getElementById('barChart').getContext('2d');\n    var barChart;\n    var periodoSelect = document.getElementById('periodoSelect');\n\n    async function cargarDatos(periodo) {\n        try {\n            const response = await fetch(`/api/ganancias?anio=2025&periodo=${periodo}`);\n    \n            // Si el servidor responde con un 204 No Content, devolvemos un array vacío\n            if (response.status === 204) {\n                actualizarGrafica([], []);\n                return;\n            }\n    \n            const data = await response.json();\n    \n            // Procesar los datos de la API\n            const meses = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\n            const labels = data.length > 0 ? data.map(item => meses[item.mes - 1]) : [\"Sin datos\"];\n            const ganancias = data.length > 0 ? data.map(item => parseFloat(item.ganancias)) : [0];\n    \n            actualizarGrafica(labels, ganancias);\n        } catch (error) {\n            console.error(\"Error al cargar datos:\", error);\n        }\n    }\n    \n    function actualizarGrafica(labels, ganancias) {\n        if (barChart) {\n            barChart.destroy();\n        }\n    \n        barChart = new Chart(ctx, {\n            type: 'bar',\n            data: {\n                labels: labels,\n                datasets: [{\n                    label: 'Ganancias',\n                    data: ganancias,\n                    backgroundColor: 'rgba(54, 162, 235, 0.2)',\n                    borderColor: 'rgba(54, 162, 235, 1)',\n                    borderWidth: 1\n                }]\n            },\n            options: {\n                responsive: true,\n                scales: {\n                    y: {\n                        beginAtZero: true\n                    }\n                }\n            }\n        });\n    }\n    \n    // Cargar datos iniciales\n    cargarDatos(periodoSelect.value);\n\n    // Cambiar los datos cuando el usuario seleccione otro período\n    periodoSelect.addEventListener(\"change\", function() {\n        cargarDatos(this.value);\n    });\n});\n","if(window.location.pathname === '/admin/configuracion/niveles'){\n\n    let dataTable;\n    let dataTableInit = false;\n\n    const estatusDictionary = {\n        0: 'Inactivo',\n        1: 'Activo'\n    };\n\n    // Configuración DataTable\n    const dataTableOption = {\n        destroy: true,\n        pageLength: 5,\n        language: {\n            url: 'https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json',\n        },\n        dom: '<\"row mb-2\"<\"d-flex justify-content-start col-sm-6\"f>>' +  \n             '<\"row\"<\"col-sm-12\"tr>>' + \n             '<\"row d-flex justify-content-between\"<\"col d-flex justify-content-start\"l><\"col d-flex justify-content-center\"i><\"col d-flex justify-content-end\"p>>',\n        columnDefs: [\n            { orderable: false, targets: [4] }  // Desactiva ordenación en Dirección y Estatus\n            //{ visible: false, targets: [7] }       // Oculta la columna Password\n        ]\n    };\n\n    // Ejecutar funciones\n    initDataTable();\n\n    // Inicializamos DataTable\n    async function initDataTable() {\n        if (dataTableInit) {\n            dataTable.destroy(); // Destruye la tabla si ya existe previamente\n        }\n\n        const niveles = await listarNiveles(); // Esperamos los datos antes de inicializar DataTable\n\n        if (niveles.length > 0) {\n            llenarTabla(niveles);\n        }\n\n        // Inicializa DataTable\n        dataTable = $('#datatable_niveles').DataTable(dataTableOption);\n        dataTableInit = true;\n    }\n\n    // Función para obtener los datos de la API\n    async function listarNiveles() {\n        try {\n            const response = await fetch('/api/niveles');\n            const niveles = await response.json();\n            return niveles;\n        } catch (error) {\n            console.error('Error al obtener niveles:', error);\n            return [];\n        }\n    }\n\n    // Función para llenar la tabla con los datos obtenidos\n    function llenarTabla(niveles) {\n        const tbody = document.getElementById('tableBody_niveles');\n        tbody.innerHTML = ''; // Limpiamos el contenido previo\n\n        niveles.forEach((nivel, index) => {\n            const estatus = estatusDictionary[nivel.estatus] || 'Desconocido';\n\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td>${nivel.nombre}</td>\n                    <td>${nivel.numero}</td>\n                    <td class=\"text-center\">${estatus}</td>\n                    <td>\n                        <!-- Botón de editar que abre el modal -->\n                        <button \n                            class=\"btn btn-sm btn-primary btnEditarNivel\" \n                            data-id=\"${nivel.id}\" \n                            data-toggle=\"modal\" \n                            data-target=\"#modalEditarNivel\">\n                            <i class=\"fa-solid fa-pen\"></i>\n                        </button>\n                        <!-- Botón de eliminar -->\n                        <button class=\"btn btn-sm btn-danger btn-eliminarNivel\" data-id=\"${nivel.id}\">\n                            <i class=\"fa-solid fa-trash\"></i>\n                        </button>\n                    </td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    // Delegación de eventos para eliminación de niveles\n    document.getElementById('tableBody_niveles').addEventListener('click', async function (event) {\n        if (event.target.closest('.btn-eliminarNivel')) {\n            const nivelId = event.target.closest('.btn-eliminarNivel').getAttribute('data-id');\n            const result = await Swal.fire({\n                title: '¿Estás seguro?',\n                text: \"Esta acción no se puede deshacer.\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#d33',\n                cancelButtonColor: '#3085d6',\n                confirmButtonText: 'Sí, eliminar',\n                cancelButtonText: 'Cancelar'\n            });\n\n            if (result.isConfirmed) {\n                try {\n                    const url = `/api/niveles/${nivelId}`;\n                    const respuesta = await fetch(url, {\n                        method: 'DELETE',\n                    });\n\n                    const resultado = await respuesta.json();\n                    mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n\n                    if (resultado.tipo === 'success') {\n                        await initDataTable();\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n    });\n    \n    // Variable global para almacenar el nivel original\n    let nivelOriginal = null;\n\n    // --------------- LLENAR MODAL PARA ACTUALIZAR -----------------\n    document.addEventListener('click', async function (event) {\n        if (event.target.closest('.btnEditarNivel')) {\n            const boton = event.target.closest('.btnEditarNivel');\n            const nivelId = boton.dataset.id;\n            nivelOriginal= '';\n            try {\n                // Obtener los datos del nivel desde la API\n                const respuesta = await fetch(`/api/niveles/${nivelId}`);\n                if (!respuesta.ok) {\n                    throw new Error(`Error al obtener nivel: ${respuesta.statusText}`);\n                }\n                const nivel = await respuesta.json();\n                nivelOriginal = { ...nivel }; // Guardar en variable global\n\n                // Llenar los campos del modal con los datos del nivel\n                document.getElementById('nombreEditar').value = nivel.nombre;\n                document.getElementById('numeroEditar').value = nivel.numero;\n                document.getElementById('estatusEditar').value = nivel.estatus;\n\n                // Guardar el ID en el botón de actualización\n                document.querySelector('.btnActualizarNivel').dataset.id = nivelId;\n\n            } catch (error) {\n                console.error('Error al obtener los datos del nivel:', error);\n            }\n        }\n    });\n\n    // --------------- ACTUALIZAR NIVEL -----------------\n    document.getElementById('formEditarNivel').addEventListener('submit', async function (e) {\n        e.preventDefault();\n\n        const nivelId = document.querySelector('.btnActualizarNivel').dataset.id;\n\n        const nivelActualizado = {\n            nombre: document.getElementById('nombreEditar').value.trim(),\n            numero: document.getElementById('numeroEditar').value.trim(),\n            estatus: document.getElementById('estatusEditar').value.trim(),\n        };\n\n        if (!nivelOriginal) {\n            console.error('Error: No hay datos originales del nivel');\n            mostrarAlerta('Error', 'No se pudieron comparar los datos originales', 'error');\n            return;\n        }\n\n        // Comparar con los datos originales sin hacer otra petición\n        let cambios = {};\n        if (nivelActualizado.nombre !== nivelOriginal.nombre) cambios.nombre = nivelActualizado.nombre;\n        if (nivelActualizado.numero !== nivelOriginal.numero) cambios.numero = nivelActualizado.numero;\n        if (nivelActualizado.estatus !== nivelOriginal.estatus) cambios.estatus = nivelActualizado.estatus;\n\n        // Si no hay cambios, no enviamos la petición\n        if (Object.keys(cambios).length === 0) {\n            mostrarAlerta2('No hay cambios por enviar', 'error');\n            return;\n        }\n\n        // Determinar si usar PUT o PATCH\n        const metodo = Object.keys(cambios).length === 3 ? \"PUT\" : \"PATCH\";\n        const datos = metodo === \"PUT\" ? nivelActualizado : cambios;\n\n        try {\n            // Enviar la actualización con una sola petición\n            const respuestaUpdate = await fetch(`/api/niveles/${nivelId}`, {\n                method: metodo,\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(datos)\n            });\n\n            if (!respuestaUpdate.ok) {\n                const errorData = await respuestaUpdate.json();\n                throw new Error(errorData.mensaje || 'Error desconocido al actualizar');\n            }\n\n            const resultado = await respuestaUpdate.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n\n        } catch (error) {\n            console.error('Error al actualizar nivel:', error);\n            mostrarAlerta('Error', error.message, 'error');\n        }\n    });\n    \n    //  --------------    CREAR NUEVO NIVEL     ----------------\n    const botonSubirNivel = document.querySelector('.btnSubirNivel');\n    botonSubirNivel.addEventListener('click', async function (e) {\n        e.preventDefault();\n\n        const nivelNuevo = {\n            nombre: document.getElementById('nombre').value.trim(),\n            numero: document.getElementById('numero').value.trim(),\n            estatus: document.getElementById('estatus').value.trim()\n        };\n\n        if (nivelNuevo.nombre === \"\" || nivelNuevo.numero === \"\") {\n            mostrarAlerta2('Todos los campos son necesarios', 'error');\n            return;\n        }\n        \n        try {\n            const datos = new FormData();\n            Object.entries(nivelNuevo).forEach(([key, value]) => datos.append(key, value));\n            const respuesta = await fetch('/api/niveles', {\n                method: 'POST',\n                body: datos\n            });\n\n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n\n            // Limpiar los campos del formulario\n            document.getElementById('nombre').value = '';\n            document.getElementById('numero').value = '';\n            document.getElementById('estatus').value = '';\n\n        } catch (error) {\n            console.error('Error en la solicitud:', error);\n        }\n    });\n}","if (window.location.pathname === '/admin/puntodeventa/venta/directa') {\n\n    const params = new URLSearchParams(window.location.search);\n    \n    const inputBuscador = document.getElementById('inputBuscarProducto');\n    const listaSugerencias = document.getElementById('listaSugerencias');\n    const tablaVenta = document.getElementById('tablaVentaProductos');\n\n    const grupoMetodoPago = document.getElementById('grupoMetodoPago');\n    const grupoEfectivo = document.getElementById('grupoEfectivo');\n    const metodoPago = document.getElementById('metodoPago');\n    const cantidadEfectivo = document.getElementById('cantidadEfectivo');\n    const feriaCalculada = document.getElementById('feriaCalculada');\n    const inputTotalPagar = document.getElementById('totalPagarVenta');\n\n    const btnTerminarVenta = document.getElementById('terminarVenta');\n\n    let serviciosVendidos = [];\n    let productosDisponibles = []; // Para guardar los productos obtenidos de la búsqueda\n    let total = 0;\n\n    inputBuscador.addEventListener('input', async (e) => {\n        const query = e.target.value.trim();\n        if (query.length >= 3) {\n            try {\n                const url = `/api/productos/codigo/${query}`;\n                const respuesta = await fetch(url);\n                productosDisponibles = await respuesta.json(); // Guardamos los productos disponibles\n                renderSugerencias(productosDisponibles);\n            } catch (error) {\n                console.error('Error al buscar productos:', error);\n                listaSugerencias.innerHTML = '<li class=\"list-group-item text-danger\">Error en la búsqueda</li>';\n                listaSugerencias.classList.remove('d-none');\n            }\n        } else {\n            limpiarLista();\n        }\n    });\n\n    function renderSugerencias(productos) {\n        listaSugerencias.innerHTML = '';\n        if (!Array.isArray(productos) || productos.length === 0) {\n            listaSugerencias.innerHTML = '<li class=\"list-group-item\">No se encontraron productos</li>';\n        } else {\n            productos.forEach(producto => {\n                const li = document.createElement('li');\n                li.classList.add('list-group-item', 'list-group-item-action');\n                li.textContent = `${producto.codigo_barras} - ${producto.nombre}`;\n                li.addEventListener('click', () => {\n                    agregarProducto(producto);  // Le pasamos el objeto completo del producto\n                    limpiarLista();\n                    inputBuscador.value = '';\n                });\n                listaSugerencias.appendChild(li);\n            });\n        }\n        listaSugerencias.classList.remove('d-none');\n    }\n\n    function limpiarLista() {\n        listaSugerencias.innerHTML = '';\n        listaSugerencias.classList.add('d-none');\n    }\n\n    function agregarProducto(producto) {\n        const precioUnitario = parseFloat(producto.precio);\n    \n        // Verificar si el producto ya está en la lista de serviciosVendidos\n        let productoExistente = serviciosVendidos.find(p => p.codigo_barras === producto.codigo_barras);\n    \n        if (productoExistente) {\n            // Si el producto ya existe, incrementamos la cantidad\n            productoExistente.cantidad++;\n            productoExistente.total = productoExistente.cantidad * precioUnitario;\n        } else {\n            // Si el producto no existe, lo agregamos a la lista\n            serviciosVendidos.push({\n                id_producto: producto.id,\n                codigo_barras: producto.codigo_barras,\n                nombre: producto.nombre,  // Agregamos el nombre del producto\n                proveedor: producto.proveedor,  // Agregamos el proveedor\n                precio: parseFloat(producto.precio),  // Precio unitario\n                foto: producto.foto,  // Foto del producto\n                cantidad: 1,\n                total: precioUnitario,\n                stock: producto.stock  // Agregar stock al producto\n            });\n        }\n    \n        // Actualizamos la tabla con los productos\n        actualizarTabla();\n    }\n    \n    // Función para actualizar la tabla\n    function actualizarTabla() {\n        // Limpiar la tabla antes de actualizarla\n        tablaVenta.innerHTML = '';\n    \n        // Recorrer todos los productos vendidos\n        serviciosVendidos.forEach(servicio => {\n            const fila = document.createElement('tr');\n            fila.innerHTML = `\n                <td>${servicio.nombre}</td>\n                <td>${servicio.proveedor}</td>\n                <td>\n                    <div class=\"d-flex justify-content-center align-items-center gap-2\">\n                        <button class=\"btn btn-sm btn-outline-secondary btn-restar\" data-id=\"${servicio.codigo_barras}\">-</button>\n                        <span class=\"cantidad\">${servicio.cantidad}</span>\n                        <button class=\"btn btn-sm btn-outline-secondary btn-sumar\" data-id=\"${servicio.codigo_barras}\" ${servicio.cantidad >= servicio.stock ? 'disabled' : ''}>+</button>\n                    </div>\n                </td>\n                <td>$${parseFloat(servicio.precio).toFixed(2)}</td>\n                <td>$${servicio.total.toFixed(2)}</td>\n                <td><img src=\"/build/img/${servicio.foto}.png\" alt=\"Foto\" width=\"50\" height=\"50\"></td>\n                <td><button class=\"btn btn-danger btn-sm\" data-id=\"${servicio.codigo_barras}\" id=\"eliminarProducto\">Eliminar</button></td>\n            `;\n            tablaVenta.appendChild(fila);\n        });\n        //console.log(serviciosVendidos);\n        // Agregar los eventos de eliminar, sumar y restar después de que la tabla haya sido actualizada\n        agregarEventosEliminar();\n        agregarEventosContador();\n        calcularTotal();\n    }\n    \n    // Función para agregar eventos de eliminación\n    function agregarEventosEliminar() {\n        const botonesEliminar = document.querySelectorAll('#eliminarProducto');\n    \n        botonesEliminar.forEach(boton => {\n            boton.addEventListener('click', function () {\n                const codigoBarras = this.getAttribute('data-id');\n                eliminarProducto(codigoBarras);\n            });\n        });\n    }\n    \n    // Función para eliminar un producto de serviciosVendidos\n    function eliminarProducto(codigoBarras) {\n        // Filtrar el producto que queremos eliminar\n        serviciosVendidos = serviciosVendidos.filter(servicio => servicio.codigo_barras !== codigoBarras);\n    \n        // Volver a actualizar la tabla\n        actualizarTabla();\n    }\n    \n    // Función para agregar eventos de incremento (+) y decremento (-)\n    function agregarEventosContador() {\n        const btnSumar = document.querySelectorAll('.btn-sumar');\n        const btnRestar = document.querySelectorAll('.btn-restar');\n    \n        // Evento de Sumar\n        btnSumar.forEach(btn => {\n            btn.addEventListener('click', function () {\n                const codigoBarras = this.getAttribute('data-id');\n                const producto = serviciosVendidos.find(p => p.codigo_barras === codigoBarras);\n    \n                if (producto && producto.cantidad < producto.stock) {\n                    producto.cantidad++;\n                    producto.total = producto.cantidad * parseFloat(producto.precio);\n                }\n    \n                // Actualizamos la tabla con los productos\n                actualizarTabla();\n            });\n        });\n    \n        // Evento de Restar\n        btnRestar.forEach(btn => {\n            btn.addEventListener('click', function () {\n                const codigoBarras = this.getAttribute('data-id');\n                const producto = serviciosVendidos.find(p => p.codigo_barras === codigoBarras);\n    \n                if (producto && producto.cantidad > 1) {\n                    producto.cantidad--;\n                    producto.total = producto.cantidad * parseFloat(producto.precio);\n                }\n    \n                // Actualizamos la tabla con los productos\n                actualizarTabla();\n            });\n        });\n    }\n\n    function calcularTotal() {\n        total = 0; // Reiniciar el total antes de empezar a sumar\n    \n        serviciosVendidos.forEach(servicio => {\n            total += servicio.total;\n        });\n    \n        const inputTotalPagar = document.getElementById('totalPagarVenta');\n        inputTotalPagar.value = `${total.toFixed(2)}`;\n    }    \n            \n    // Cerrar la lista si hace clic fuera\n    document.addEventListener('click', function (e) {\n        const isClickInside = inputBuscador.contains(e.target) || listaSugerencias.contains(e.target);\n        if (!isClickInside) {\n            limpiarLista();\n        }\n    });\n\n    metodoPago.addEventListener('change', () => {\n        if( metodoPago.value === '2'){\n            grupoEfectivo.classList.add('d-none')\n        }\n        if( metodoPago.value === '3'){\n            grupoEfectivo.classList.add('d-none')\n        }\n        if( metodoPago.value === '1'){\n            grupoEfectivo.classList.remove('d-none');\n        }\n    })\n\n    // Calcular feria cuando se ingresa efectivo\n    cantidadEfectivo.addEventListener('input', () => {\n        // Eliminar cualquier carácter que no sea número o punto decimal\n        const totalRaw = inputTotalPagar.value;\n        const total = parseFloat(totalRaw) || 0;\n        //console.log(total);\n        const efectivo = parseFloat(cantidadEfectivo.value) || 0;\n        //console.log(efectivo);\n        const feria = total - efectivo;\n        feriaCalculada.value = Math.abs(feria);\n    });\n    \n    // Enviar datos de la venta directa al servidor\n    btnTerminarVenta.addEventListener('click', async () => {\n        if (serviciosVendidos.length === 0) {\n            mostrarAlerta('Opps.', 'El carrito está vacío', 'warning');\n            return;\n        }\n\n        const urlUsuario = '/api/usuario/activo';\n        let usuario_id = 0;\n\n        try {\n            const respuesta = await fetch(urlUsuario);\n            const usuario = await respuesta.json();\n            usuario_id = usuario.id;\n        } catch (error) {\n            console.error(error);\n        }\n\n        // Preparar datos de ventas y productos (sin reservacion_id real)\n        const ventas = serviciosVendidos.map(producto => ({\n            producto_id: Number(producto.id_producto),\n            cantidad: Number(producto.cantidad),\n            monto: producto.cantidad * producto.precio,\n            descripcion: producto.nombre,\n            usuario_id: usuario_id,\n            estado: 1 // Estado 1: pagado al instante\n        }));\n\n        const productos = serviciosVendidos.map(producto => ({\n            producto_id: Number(producto.id_producto),\n            cantidad: Number(producto.cantidad)\n        }));\n\n        const datos = JSON.stringify({ ventas, productos });\n\n        const urlVenta = '/api/productos/reservacion/vender';\n\n        try {\n            const respuesta = await fetch(urlVenta, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: datos\n            });\n\n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo, '/admin/puntodeventa/vender');\n\n        } catch (error) {\n            console.error(error);\n        }\n    });\n}\n","if (window.location.pathname === '/admin/puntodeventa/vender/reserva') {\n\n    const params = new URLSearchParams(window.location.search);\n    const idReserva = params.get(\"id\");\n\n    const inputBuscador = document.getElementById('inputBuscarProducto');\n    const listaSugerencias = document.getElementById('listaSugerencias');\n    const tablaVenta = document.getElementById('tablaVentaProductos');\n\n    const cuandoPagar = document.getElementById('cuandoPagar');\n    const grupoMetodoPago = document.getElementById('grupoMetodoPago');\n    const grupoEfectivo = document.getElementById('grupoEfectivo');\n    const metodoPago = document.getElementById('metodoPago');\n    const cantidadEfectivo = document.getElementById('cantidadEfectivo');\n    const feriaCalculada = document.getElementById('feriaCalculada');\n    const inputTotalPagar = document.getElementById('totalPagarVenta');\n\n    const btnTerminarVenta = document.getElementById('terminarVenta');\n\n    let serviciosVendidos = [];\n    let productosDisponibles = []; // Para guardar los productos obtenidos de la búsqueda\n    let total = 0;\n\n    inputBuscador.addEventListener('input', async (e) => {\n        const query = e.target.value.trim();\n        if (query.length >= 3) {\n            try {\n                const url = `/api/productos/codigo/${query}`;\n                const respuesta = await fetch(url);\n                productosDisponibles = await respuesta.json(); // Guardamos los productos disponibles\n                renderSugerencias(productosDisponibles);\n            } catch (error) {\n                console.error('Error al buscar productos:', error);\n                listaSugerencias.innerHTML = '<li class=\"list-group-item text-danger\">Error en la búsqueda</li>';\n                listaSugerencias.classList.remove('d-none');\n            }\n        } else {\n            limpiarLista();\n        }\n    });\n\n    function renderSugerencias(productos) {\n        listaSugerencias.innerHTML = '';\n        if (!Array.isArray(productos) || productos.length === 0) {\n            listaSugerencias.innerHTML = '<li class=\"list-group-item\">No se encontraron productos</li>';\n        } else {\n            productos.forEach(producto => {\n                const li = document.createElement('li');\n                li.classList.add('list-group-item', 'list-group-item-action');\n                li.textContent = `${producto.codigo_barras} - ${producto.nombre}`;\n                li.addEventListener('click', () => {\n                    agregarProducto(producto);  // Le pasamos el objeto completo del producto\n                    limpiarLista();\n                    inputBuscador.value = '';\n                });\n                listaSugerencias.appendChild(li);\n            });\n        }\n        listaSugerencias.classList.remove('d-none');\n    }\n\n    function limpiarLista() {\n        listaSugerencias.innerHTML = '';\n        listaSugerencias.classList.add('d-none');\n    }\n\n    function agregarProducto(producto) {\n        const precioUnitario = parseFloat(producto.precio);\n    \n        // Verificar si el producto ya está en la lista de serviciosVendidos\n        let productoExistente = serviciosVendidos.find(p => p.codigo_barras === producto.codigo_barras);\n    \n        if (productoExistente) {\n            // Si el producto ya existe, incrementamos la cantidad\n            productoExistente.cantidad++;\n            productoExistente.total = productoExistente.cantidad * precioUnitario;\n        } else {\n            // Si el producto no existe, lo agregamos a la lista\n            serviciosVendidos.push({\n                id_producto: producto.id,\n                codigo_barras: producto.codigo_barras,\n                nombre: producto.nombre,  // Agregamos el nombre del producto\n                proveedor: producto.proveedor,  // Agregamos el proveedor\n                precio: parseFloat(producto.precio),  // Precio unitario\n                foto: producto.foto,  // Foto del producto\n                cantidad: 1,\n                total: precioUnitario,\n                stock: producto.stock  // Agregar stock al producto\n            });\n        }\n    \n        // Actualizamos la tabla con los productos\n        actualizarTabla();\n    }\n    \n    // Función para actualizar la tabla\n    function actualizarTabla() {\n        // Limpiar la tabla antes de actualizarla\n        tablaVenta.innerHTML = '';\n    \n        // Recorrer todos los productos vendidos\n        serviciosVendidos.forEach(servicio => {\n            const fila = document.createElement('tr');\n            fila.innerHTML = `\n                <td>${servicio.nombre}</td>\n                <td>${servicio.proveedor}</td>\n                <td>\n                    <div class=\"d-flex justify-content-center align-items-center gap-2\">\n                        <button class=\"btn btn-sm btn-outline-secondary btn-restar\" data-id=\"${servicio.codigo_barras}\">-</button>\n                        <span class=\"cantidad\">${servicio.cantidad}</span>\n                        <button class=\"btn btn-sm btn-outline-secondary btn-sumar\" data-id=\"${servicio.codigo_barras}\" ${servicio.cantidad >= servicio.stock ? 'disabled' : ''}>+</button>\n                    </div>\n                </td>\n                <td>$${parseFloat(servicio.precio).toFixed(2)}</td>\n                <td>$${servicio.total.toFixed(2)}</td>\n                <td><img src=\"/build/img/${servicio.foto}.png\" alt=\"Foto\" width=\"50\" height=\"50\"></td>\n                <td><button class=\"btn btn-danger btn-sm\" data-id=\"${servicio.codigo_barras}\" id=\"eliminarProducto\">Eliminar</button></td>\n            `;\n            tablaVenta.appendChild(fila);\n        });\n        //console.log(serviciosVendidos);\n        // Agregar los eventos de eliminar, sumar y restar después de que la tabla haya sido actualizada\n        agregarEventosEliminar();\n        agregarEventosContador();\n        calcularTotal();\n    }\n    \n    // Función para agregar eventos de eliminación\n    function agregarEventosEliminar() {\n        const botonesEliminar = document.querySelectorAll('#eliminarProducto');\n    \n        botonesEliminar.forEach(boton => {\n            boton.addEventListener('click', function () {\n                const codigoBarras = this.getAttribute('data-id');\n                eliminarProducto(codigoBarras);\n            });\n        });\n    }\n    \n    // Función para eliminar un producto de serviciosVendidos\n    function eliminarProducto(codigoBarras) {\n        // Filtrar el producto que queremos eliminar\n        serviciosVendidos = serviciosVendidos.filter(servicio => servicio.codigo_barras !== codigoBarras);\n    \n        // Volver a actualizar la tabla\n        actualizarTabla();\n    }\n    \n    // Función para agregar eventos de incremento (+) y decremento (-)\n    function agregarEventosContador() {\n        const btnSumar = document.querySelectorAll('.btn-sumar');\n        const btnRestar = document.querySelectorAll('.btn-restar');\n    \n        // Evento de Sumar\n        btnSumar.forEach(btn => {\n            btn.addEventListener('click', function () {\n                const codigoBarras = this.getAttribute('data-id');\n                const producto = serviciosVendidos.find(p => p.codigo_barras === codigoBarras);\n    \n                if (producto && producto.cantidad < producto.stock) {\n                    producto.cantidad++;\n                    producto.total = producto.cantidad * parseFloat(producto.precio);\n                }\n    \n                // Actualizamos la tabla con los productos\n                actualizarTabla();\n            });\n        });\n    \n        // Evento de Restar\n        btnRestar.forEach(btn => {\n            btn.addEventListener('click', function () {\n                const codigoBarras = this.getAttribute('data-id');\n                const producto = serviciosVendidos.find(p => p.codigo_barras === codigoBarras);\n    \n                if (producto && producto.cantidad > 1) {\n                    producto.cantidad--;\n                    producto.total = producto.cantidad * parseFloat(producto.precio);\n                }\n    \n                // Actualizamos la tabla con los productos\n                actualizarTabla();\n            });\n        });\n    }\n\n    function calcularTotal() {\n        total = 0; // Reiniciar el total antes de empezar a sumar\n    \n        serviciosVendidos.forEach(servicio => {\n            total += servicio.total;\n        });\n    \n        const inputTotalPagar = document.getElementById('totalPagarVenta');\n        inputTotalPagar.value = `${total.toFixed(2)}`;\n    }    \n            \n    // Cerrar la lista si hace clic fuera\n    document.addEventListener('click', function (e) {\n        const isClickInside = inputBuscador.contains(e.target) || listaSugerencias.contains(e.target);\n        if (!isClickInside) {\n            limpiarLista();\n        }\n    });\n\n    // Mostrar u ocultar método de pago y efectivo\n    cuandoPagar.addEventListener('change', () => {\n        if (cuandoPagar.value === '1') {\n            grupoMetodoPago.classList.remove('d-none');//mostrar\n            grupoEfectivo.classList.remove('d-none');\n        } else {\n            grupoMetodoPago.classList.add('d-none');\n            grupoEfectivo.classList.add('d-none');\n            cantidadEfectivo.value = '';\n            feriaCalculada.value = '';\n        }\n    });\n\n    metodoPago.addEventListener('change', () => {\n        if( metodoPago.value === '2'){\n            grupoEfectivo.classList.add('d-none')\n        }\n        if( metodoPago.value === '3'){\n            grupoEfectivo.classList.add('d-none')\n        }\n        if( metodoPago.value === '1'){\n            grupoEfectivo.classList.remove('d-none');\n        }\n    })\n\n    // Calcular feria cuando se ingresa efectivo\n    cantidadEfectivo.addEventListener('input', () => {\n        // Eliminar cualquier carácter que no sea número o punto decimal\n        const totalRaw = inputTotalPagar.value;\n        const total = parseFloat(totalRaw) || 0;\n        //console.log(total);\n        const efectivo = parseFloat(cantidadEfectivo.value) || 0;\n        //console.log(efectivo);\n        const feria = total - efectivo;\n        feriaCalculada.value = Math.abs(feria);\n    });\n    \n    // Enviar datos de la venta al servidor\n    btnTerminarVenta.addEventListener('click', async () => {\n\n        if (serviciosVendidos.length === 0) {\n            mostrarAlerta('Opps.', 'El carrito está vacío', 'warning');\n            return;\n        }        \n        if (!cuandoPagar.value) {\n            mostrarAlerta('Opps.', 'Falta seleccionar método de pago', 'warning');\n            return;\n        }\n\n        const urlUsuario = '/api/usuario/activo';\n        let usuario_id = 0;\n        \n        try {\n            const respuesta = await fetch(urlUsuario);\n            const usuario = await respuesta.json();\n            usuario_id = usuario.id;\n        } catch (error) {\n            console.error(error);\n        }\n\n        // Preparar datos de ventas y productos\n        // const ventas = serviciosVendidos.map(producto => ({\n        //     reservacion_id: idReserva.toString(),\n        //     producto_id: producto.id_producto.toString(),\n        //     cantidad: producto.cantidad.toString(), // 👈 AGREGADO\n        //     monto: (producto.cantidad * producto.precio).toString(),\n        //     descripcion: producto.nombre.toString(),\n        //     usuario_id: usuario_id.toString(),\n        //     estado: cuandoPagar.value === '1' ? \"1\" : \"0\"\n        // }));\n        \n        // const productos = serviciosVendidos.map(producto => ({\n        //     producto_id: producto.id_producto.toString(),\n        //     cantidad: producto.cantidad.toString()\n        // }));\n\n        const ventas = serviciosVendidos.map(producto => ({\n            reservacion_id: Number(idReserva),\n            producto_id: Number(producto.id_producto),\n            cantidad: Number(producto.cantidad),\n            monto: producto.cantidad * producto.precio,\n            descripcion: producto.nombre,\n            usuario_id: usuario_id,\n            estado: cuandoPagar.value === '1' ? 1 : 0\n        }));\n        \n        const productos = serviciosVendidos.map(producto => ({\n            producto_id: Number(producto.id_producto),\n            cantidad: Number(producto.cantidad)\n        }));\n        \n        const datos = JSON.stringify({ ventas, productos });\n        console.log(datos);\n        const urlVenta = '/api/productos/reservacion/vender';\n\n        try {\n            const respuesta = await fetch(urlVenta, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: datos\n            });\n\n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo, '/admin/puntodeventa/vender');\n\n        } catch (error) {\n            console.error(error);\n        }\n    });\n}\n","if (window.location.pathname === '/admin/recepcion') {\n    // Seleccionar todos los enlaces con la clase \"small-box-footer\"\n    const habitaciones = document.querySelectorAll('.small-box-footer');\n\n    habitaciones.forEach(habitacion => {\n        // Obtener los valores de los atributos data\n        const id = habitacion.getAttribute('data-id');\n        const estado = habitacion.getAttribute('data-estado');\n\n        // Si la habitación está en estado 3 o 6, mostrar alerta al hacer clic\n        if (estado == 3 || estado == 6 || estado == 8) {\n            habitacion.addEventListener('click', (event) => {\n                event.preventDefault(); // Evita la redirección por defecto\n                \n                Swal.fire({\n                    title: \"¿Limpieza Terminada?\",\n                    icon: \"warning\",\n                    showCancelButton: true,\n                    confirmButtonColor: \"#3085d6\",\n                    cancelButtonColor: \"#d33\",\n                    confirmButtonText: \"Sí, confirmar!\"\n                }).then((result) => {\n                    if (result.isConfirmed) {\n                        let nuevoEstado; // Declarar variable correctamente\n                        \n                        if (estado == 3) {\n                            nuevoEstado = 2;\n                        } else if (estado == 6) {\n                            nuevoEstado = 1;\n                        } else if( estado == 8){\n                            nuevoEstado = 5;\n                        }\n\n                        if (nuevoEstado !== undefined) {\n                            // Llamar a la función para actualizar el estado\n                            actualizarEstadoHabitacion(id, nuevoEstado);\n                        } else {\n                            console.error(\"Error: nuevoEstado no está definido.\");\n                        }\n                    }\n                });\n            });\n        }\n    });\n\n    // Función para actualizar el estado de la habitación mediante PATCH\n    function actualizarEstadoHabitacion(id, nuevoEstado) {\n        fetch(`/api/habitaciones/${id}`, {\n            method: \"PATCH\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                id_estado_habitacion: nuevoEstado\n            })\n        })\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(`HTTP error! Status: ${response.status}`);\n            }\n            return response.json();\n        })\n        .then(data => {\n            //console.log(\"Respuesta del servidor:\", data);\n            Swal.fire({\n                title: \"Habitación nuevamente disponible\",\n                icon: \"success\"\n            }).then(() => {\n                location.reload(); // Recargar la página para reflejar cambios\n            });\n        })\n        .catch(error => {\n            console.error(\"Error:\", error);\n            Swal.fire({\n                title: \"Error al actualizar\",\n                text: \"No se pudo cambiar la habitación.\",\n                icon: \"error\"\n            });\n        });\n    }\n}","if (window.location.pathname === \"/admin/recepcion/habitacion\") {\n\n    // Elementos del DOM\n    const listaSugerencias = document.getElementById(\"sugerenciaCorreo\");\n    const inputCorreoCliente = document.getElementById(\"correo\");\n    const inputNombreCliente = document.getElementById(\"nombre\");\n    const inputApellidosCliente = document.getElementById(\"apellidos\");\n    const inputDocumentoCliente = document.getElementById(\"documento\");\n    const inputTelefonoCliente = document.getElementById(\"telefono\");\n    const inputDireccionCliente = document.getElementById(\"direccion\");\n\n    //Modal para crear cliente si es nuevo\n    const btnCrearCliente = document.querySelector(\".btnCrearCliente\");\n    const inputNombreClienteNuevo = document.getElementById(\"nombreNuevoCliente\");\n    const inputApellidosClienteNuevo = document.getElementById(\"apellidosNuevoCliente\");\n    const inputCorreoClienteNuevo = document.getElementById(\"correoNuevoCliente\");\n    const inputTelefonoClienteNuevo = document.getElementById(\"telefonoNuevoCliente\");\n    const inputDocumentoClienteNuevo = document.getElementById(\"documento_identidadNuevoCliente\");\n    const inputDireccionClienteNuevo = document.getElementById(\"direccionNuevoCliente\");\n\n    let clienteNuevo = '';\n\n    const inputFechaEntrada = document.getElementById(\"fechaEntrada\");\n    const inputFechaSalida = document.getElementById(\"fechaSalida\");\n    const inputTipoDescuento = document.querySelectorAll(\"input[name='tipoDescuento']\");\n    const inputDescuento = document.getElementById(\"descuento\");\n    const inputCobroExtra = document.getElementById(\"cobroExtra\");\n    const inputAdelanto = document.getElementById(\"adelanto\");\n    const inputTotalPagar = document.getElementById(\"totalPagar\");\n    const precioHabitacion = parseFloat(document.getElementById(\"precio_habitacion\").textContent.trim()) || 0;\n    const inputMetodoPago = document.getElementById(\"metodoPago\");\n    const inputObservaciones = document.getElementById(\"observaciones\");\n    \n    let noches = 1;\n    let totalOriginal = noches * precioHabitacion;\n    let totalPendiente = totalOriginal;\n    let descuento = 0;\n    let tipoDescuento = '';\n    let cobroExtra = 0;\n    let adelanto = 0;\n\n    // Función para buscar clientes por correo en la API\n    async function buscarClientes(correo) {\n        if (correo.length < 3) {\n            listaSugerencias.classList.add(\"d-none\");\n            return;\n        }\n\n        try {\n            const response = await fetch(`/api/clientes/correo/${encodeURIComponent(correo)}`);\n\n            if (!response.ok) {\n                throw new Error(`Error HTTP: ${response.status}`);\n            }\n\n            const clientes = await response.json();\n            mostrarSugerencias(clientes);\n        } catch (error) {\n            console.error(\"Error al obtener clientes:\", error);\n            listaSugerencias.classList.add(\"d-none\");\n        }\n    }\n\n    // Función para mostrar sugerencias de clientes en la lista desplegable\n    function mostrarSugerencias(clientes) {\n        listaSugerencias.innerHTML = \"\";\n\n        if (clientes.length === 0) {\n            listaSugerencias.classList.add(\"d-none\");\n            return;\n        }\n\n        listaSugerencias.classList.remove(\"d-none\");\n\n        clientes.forEach((cliente) => {\n            const item = document.createElement(\"li\");\n            item.classList.add(\"list-group-item\", \"list-group-item-action\");\n            item.textContent = cliente.correo;\n            item.dataset.id = cliente.id;\n            item.addEventListener(\"click\", () => seleccionarCliente(cliente));\n            listaSugerencias.appendChild(item);\n        });\n    }\n\n    // Función para llenar los campos con la información del cliente seleccionado\n    function seleccionarCliente(cliente) {\n        inputCorreoCliente.value = cliente.correo;\n        inputNombreCliente.value = cliente.nombre;\n        inputApellidosCliente.value = cliente.apellidos;\n        inputDocumentoCliente.value = cliente.documento_identidad;\n        inputTelefonoCliente.value = cliente.telefono;\n        inputDireccionCliente.value = cliente.direccion;\n\n        listaSugerencias.classList.add(\"d-none\");\n    }\n\n    // Evento para buscar clientes cuando el usuario escribe en el input\n    inputCorreoCliente.addEventListener(\"input\", (e) => {\n        buscarClientes(e.target.value);\n    });\n\n    // Ocultar sugerencias si el usuario hace clic fuera\n    document.addEventListener(\"click\", (e) => {\n        if (!inputCorreoCliente.contains(e.target) && !listaSugerencias.contains(e.target)) {\n            listaSugerencias.classList.add(\"d-none\");\n        }\n    });\n\n    //Crear cliente nuevo si no esta registrado y llenar la reserva con sus datos\n    btnCrearCliente.addEventListener(\"click\", (event) =>{\n        event.preventDefault();\n\n        clienteNuevo = {\n            nombre: inputNombreClienteNuevo.value.trim(),\n            apellidos: inputApellidosClienteNuevo.value.trim(),\n            correo: inputCorreoClienteNuevo.value.trim(),\n            telefono: inputTelefonoClienteNuevo.value.trim(),\n            documento_identidad: inputDocumentoClienteNuevo.value.trim(), // Tenías un error en \"identad\"\n            direccion: inputDireccionClienteNuevo.value.trim()\n        };\n\n        //Validar los datos del cliente nuevo\n        if(!clienteNuevo.nombre || !clienteNuevo.apellidos || !clienteNuevo.telefono){\n            mostrarAlerta2('Datos Incompletos: El nombre, apellidos y telefono son obligatorios', 'error')\n            return;\n        }\n\n        // Llenar los inputs principales con los datos del nuevo cliente\n        inputNombreCliente.value = clienteNuevo.nombre + \" \" + clienteNuevo.apellidos;\n        inputCorreoCliente.value = clienteNuevo.correo ?? '';\n        inputDocumentoCliente.value = clienteNuevo.documento_identidad ?? '';\n        inputTelefonoCliente.value = clienteNuevo.telefono;\n        inputDireccionCliente.value = clienteNuevo.direccion ?? '';\n        \n        mostrarAlerta('Huesped Agregado','Datos capturados con exito','info');\n    })\n\n    /////////////////////////////\n    function calcularNoches() {\n        const fechaEntrada = new Date(inputFechaEntrada.value);\n        const fechaSalida = new Date(inputFechaSalida.value);\n    \n        if (isNaN(fechaEntrada) || isNaN(fechaSalida) || fechaSalida <= fechaEntrada) {\n            noches = 1;\n        } else {\n            noches = (fechaSalida - fechaEntrada) / (1000 * 60 * 60 * 24);\n        }\n    }\n    \n    function calcularTotalPagar() {\n        totalOriginal = noches * precioHabitacion;\n        \n        descuento = parseFloat(inputDescuento.value) || 0;\n        cobroExtra = parseFloat(inputCobroExtra.value) || 0;\n        adelanto = parseFloat(inputAdelanto.value) || 0;\n        \n        const tipoDescuentoSeleccionado = document.querySelector(\"input[name='tipoDescuento']:checked\");\n        tipoDescuento = tipoDescuentoSeleccionado ? tipoDescuentoSeleccionado.value : '';\n        \n        let totalConDescuento = totalOriginal;\n        if (tipoDescuento === \"PORCENTAJE\") {\n            // Aquí calculas el descuento como cantidad real\n            descuento = totalOriginal * (descuento / 100);\n            totalConDescuento -= descuento;\n        } else if (tipoDescuento === \"MONTO\") {\n            totalConDescuento -= descuento;\n        }\n        \n        totalPendiente = totalConDescuento + cobroExtra - adelanto;\n        inputTotalPagar.value = totalPendiente.toFixed(2);\n    }\n    \n    function actualizarCalculo() {\n        calcularNoches();\n        calcularTotalPagar();\n    }\n    \n    [inputFechaEntrada, inputFechaSalida, inputDescuento, inputCobroExtra, inputAdelanto].forEach(input => {\n        input.addEventListener(\"input\", actualizarCalculo);\n    });\n    \n    inputTipoDescuento.forEach(radio => {\n        radio.addEventListener(\"change\", actualizarCalculo);\n    });\n    \n    // Calcular total inicial al cargar la página\n    actualizarCalculo();\n\n    //Obtener datos y enviar datos de la reserva de la habitacion al servidor\n    const metodoPago = inputMetodoPago.value;\n    const observaciones = inputObservaciones.value.trim();\n    document.getElementById(\"reservarHabitacion\").addEventListener('click', async (e) => {\n        \n        e.preventDefault();\n        \n        // Obtener la hora actual con ceros asegurados\n        const ahora = new Date();\n        const horas = String(ahora.getHours()).padStart(2, '0');\n        const minutos = String(ahora.getMinutes()).padStart(2, '0');\n        const segundos = String(ahora.getSeconds()).padStart(2, '0');\n        const horaActual = `${horas}:${minutos}:${segundos}`;\n\n        // Concatenar con la fecha de entrada\n        const fechaEntrada = `${inputFechaEntrada.value} ${horaActual}`;\n        \n        //mostrar alertas o alerta si faltan datos\n        if(!inputNombreCliente.value.trim() || !inputApellidosCliente.value.trim() || !inputTelefonoCliente.value.trim()){\n            mostrarAlerta('Faltan datos del Huesped', 'El nombre, apellidos y telefono son obligatorios', 'warning');\n            return;\n        }\n\n        const params = new URLSearchParams(window.location.search);\n        const idHabitacion = params.get(\"id\");\n\n        const reserva = {\n            cliente: {\n                correo : inputCorreoCliente.value.trim(),\n                nombre : inputNombreCliente.value.trim(),\n                apellidos : inputApellidosCliente.value.trim(),\n                documento_identidad : inputDocumentoCliente.value.trim(),\n                telefono : inputTelefonoCliente.value.trim(),\n                direccion : inputDireccionCliente.value.trim()\n            },\n            fechas : {\n                // entrada: `${inputFechaEntrada.value} 14:00:00`,\n                entrada: fechaEntrada,\n                salida: `${inputFechaSalida.value} 12:00:00`\n            },\n            habitaciones: [idHabitacion],\n            pago: {\n                totalPagar: parseFloat(totalPendiente),\n                totalPagarOriginal: parseFloat(totalOriginal),\n                descuento: parseFloat(descuento),\n                tipoDescuento: tipoDescuento,\n                cobroExtra: parseFloat(cobroExtra),\n                adelanto: parseFloat(adelanto)\n            },\n            observaciones: observaciones,\n            metodo_pago: metodoPago // METODO de PAGO va aquí si el backend lo espera dentro de pago\n        };\n\n        // ✅ NO sobreescribas el FormData\n        const formData = new FormData();\n        formData.append('reserva', JSON.stringify(reserva));\n        \n        // ✅ Enviar correctamente el FormData\n        try {\n            const respuesta = await fetch('/api/reservaciones', {\n                method: 'POST',\n                body: formData\n            });\n        \n            if (!respuesta.ok) throw new Error('Error en la respuesta del servidor');\n        \n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo , '/admin/recepcion');\n        } catch (error) {\n            console.error('Error:', error);\n            mostrarAlerta('Error', 'No se pudo enviar la reserva', 'error');\n        }        \n    })\n}\n","if (window.location.pathname === '/registro') {\n\n    const btnCrear = document.getElementById('crear-cuenta');\n\n    if (btnCrear) {\n        btnCrear.addEventListener('click', async function(event) { // Marca la función como 'async'\n\n            event.preventDefault();\n\n            const nuevoUsuario = {\n                nombre: document.getElementById('nombre').value.trim(),\n                apellido: document.getElementById('apellidos').value.trim(),\n                email: document.getElementById('email').value.trim(),\n                password: document.getElementById('password').value.trim(),\n                password2: document.getElementById('password2').value.trim(),\n                telefono: document.getElementById('telefono').value.trim(),\n                direccion: document.getElementById('direccion').value.trim()\n            };\n            \n            if (nuevoUsuario.email === \"\" || nuevoUsuario.nombre === \"\" || nuevoUsuario.direccion === \"\" || nuevoUsuario.password === \"\" || nuevoUsuario.password2 === \"\" || nuevoUsuario.telefono === \"\") {\n                mostrarAlerta2('Todos los campos son necesarios', 'error');\n                return;\n            }\n            \n            if (nuevoUsuario.password !== nuevoUsuario.password2) {\n                mostrarAlerta2('Las contraseñas no coinciden', 'error');\n                return;\n            }\n            \n            // Eliminar 'password2' antes de enviarlo al servidor\n            delete nuevoUsuario.password2;\n\n            try {\n                // Crear FormData para enviar los datos\n                const datos = new FormData();\n                Object.entries(nuevoUsuario).forEach(([key, value]) => datos.append(key, value));\n                const url = 'http://localhost:3000/registro';\n                const respuesta = await fetch(url, { // Corregido: Usar un objeto en lugar de un array\n                    method: 'POST',\n                    body: datos\n                });\n\n                // Esperar la respuesta en formato JSON\n                const resultado = await respuesta.json();\n                mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo, '/login');\n                \n            } catch (error) {\n                console.log('Error en la solicitud:', error);\n            }\n\n        });\n    }\n}\n","if(window.location.pathname === '/admin/registro-actividades'){\n\n    let dataTable;\n    let dataTableInit = false;\n\n    // Configuración de DataTable\n    const dataTableOption = {\n        destroy: true, // Destruir la tabla si ya existe\n        pageLength: 10, // Número de filas por página\n        language: {\n            url: 'https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json', // Idioma en español\n        },\n        dom: '<\"row mb-2\"<\"d-flex justify-content-start col-sm-6\"f>>' +  \n            '<\"row\"<\"col-sm-12\"tr>>' + \n            '<\"row d-flex justify-content-between\"<\"col d-flex justify-content-start\"l><\"col d-flex justify-content-center\"i><\"col d-flex justify-content-end\"p>>', // Estructura del DOM\n        columnDefs: [\n            { orderable: false, targets: [4] }  // Desactiva ordenación en la columna de Acción\n        ]\n    };\n\n    // Ejecutamos la función para inicializar la tabla\n    initDataTable();\n\n    // Inicializamos DataTable\n    async function initDataTable() {\n        if (dataTableInit) {\n            dataTable.destroy(); // Destruir la tabla si ya existe previamente\n        }\n\n        const actividades = await obtenerActividades(); // Obtener los datos de la API\n        if (actividades.length > 0) {\n            llenarTabla(actividades); // Llenar la tabla con los datos obtenidos\n        }\n\n        // Inicializa DataTable con las opciones configuradas\n        dataTable = $('#tabla-actividades').DataTable(dataTableOption);\n        dataTableInit = true;\n    }\n\n    // Función para obtener los datos de la API\n    async function obtenerActividades() {\n        try {\n            const response = await fetch('/api/registro-actividades');\n            if (!response.ok) {\n                throw new Error('Error al obtener actividades');\n            }\n            const actividades = await response.json();\n            return actividades;\n        } catch (error) {\n            console.error('Error al obtener actividades:', error);\n            return [];\n        }\n    }\n\n    // Función para llenar la tabla con los datos obtenidos\n    function llenarTabla(actividades) {\n        const tbody = document.querySelector('#tabla-actividades tbody');\n        tbody.innerHTML = ''; // Limpiar cualquier contenido previo\n\n        actividades.forEach((actividad, index) => {\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td>${actividad.nombre_usuario}</td>\n                    <td>${actividad.telefono}</td>\n                    <td><span class=\"badge badge-info\">${actividad.accion}</span></td>\n                    <td>${actividad.detalle}</td>\n                    <td>${actividad.fecha}</td>\n                    <td>${actividad.hora}</td>\n                </tr>\n            `;\n            tbody.innerHTML += row; // Añadir la fila a la tabla\n        });\n    }\n}","if (window.location.pathname === '/admin/reporte-diario') {\n\n    let dataTableReservas;\n    let dataTableServicios;\n    let dataTableReservasInit = false;\n    let dataTableServiciosInit = false;\n\n    const nombreHotel = 'Hotel Paraíso Tropical';\n\n    function obtenerFechaFormateada() {\n        const fecha = new Date();\n        const year = fecha.getFullYear();\n        const month = String(fecha.getMonth() + 1).padStart(2, '0');\n        const day = String(fecha.getDate()).padStart(2, '0');\n        const hours = String(fecha.getHours()).padStart(2, '0');\n        const minutes = String(fecha.getMinutes()).padStart(2, '0');\n        const seconds = String(fecha.getSeconds()).padStart(2, '0');\n        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n    }\n\n    const fechaFormateada = obtenerFechaFormateada();\n    const mensajeTopReporte = `Generado el: ${fechaFormateada}`;\n    const tituloReporteReservas = `Reporte de Reservaciones - ${nombreHotel}`;\n    const tituloReporteServicios = `Reporte de Ventas y Servicios - ${nombreHotel}`;\n    const nombreArchivoReservas = `reservaciones_${fechaFormateada.replace(/[\\s:]/g, '_')}`;\n    const nombreArchivoServicios = `servicios_${fechaFormateada.replace(/[\\s:]/g, '_')}`;\n\n    let totalVentaServicios = 0;\n    let totalReservaciones = 0;\n    let totalGeneral = 0;\n\n    let totalVentaDirecta = 0;\n    let totalVentaReservacion = 0;\n    let totalVentaGeneral = 0;\n\n    const configBase = {\n        responsive: true,\n        paging: true,\n        ordering: true,\n        info: true,\n        language: {\n            url: '//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json'\n        },\n        dom: '<\"d-flex justify-content-between align-items-center mb-2\"fB>rtip'\n    };\n\n    const opcionesReservas = {\n        ...configBase,\n        buttons: [\n            {\n                extend: 'excelHtml5',\n                title: tituloReporteReservas,\n                messageTop: mensajeTopReporte,\n                filename: nombreArchivoReservas,\n                text: '<i class=\"fas fa-file-excel\"></i> Excel',\n                className: 'btn btn-success btn-sm'\n            },\n            {\n                extend: 'pdfHtml5',\n                title: tituloReporteReservas,\n                messageTop: mensajeTopReporte,\n                filename: nombreArchivoReservas,\n                text: '<i class=\"fas fa-file-pdf\"></i> PDF',\n                className: 'btn btn-danger btn-sm',\n                orientation: 'portrait',\n                pageSize: 'A4',\n                exportOptions: {\n                    columns: ':visible',\n                    modifier: {\n                        page: 'all'\n                    }\n                },\n                customize: function (doc) {\n                    doc.defaultStyle.fontSize = 10;\n                    doc.styles.tableHeader.fontSize = 12;\n                }\n            }\n        ]\n    };\n\n    const opcionesServicios = {\n        ...configBase,\n        buttons: [\n            {\n                extend: 'excelHtml5',\n                title: tituloReporteServicios,\n                messageTop: mensajeTopReporte,\n                filename: nombreArchivoServicios,\n                text: '<i class=\"fas fa-file-excel\"></i> Excel',\n                className: 'btn btn-success btn-sm'\n            },\n            {\n                extend: 'pdfHtml5',\n                title: tituloReporteServicios,\n                messageTop: mensajeTopReporte,\n                filename: nombreArchivoServicios,\n                text: '<i class=\"fas fa-file-pdf\"></i> PDF',\n                className: 'btn btn-danger btn-sm',\n                orientation: 'portrait',\n                pageSize: 'A4',\n                exportOptions: {\n                    columns: ':visible',\n                    modifier: {\n                        page: 'all'\n                    }\n                },\n                customize: function (doc) {\n                    doc.defaultStyle.fontSize = 10;\n                    doc.styles.tableHeader.fontSize = 12;\n                }\n            }\n        ]\n    };\n\n    async function initReportesDiarios() {\n\n        const usuarioId = document.getElementById('usuario').value || 'null';\n        const fecha = document.getElementById('fecha').value;\n        const url = `/api/reporte-diario/${usuarioId}/${fecha}`;\n\n        try {\n            const response = await fetch(url);\n            const { reservas, ventas } = await response.json();\n\n            if (dataTableReservasInit) dataTableReservas.destroy();\n            if (dataTableServiciosInit) dataTableServicios.destroy();\n\n            llenarTablaReservas(reservas);\n            llenarTablaServicios(ventas);\n\n            dataTableReservas = $('#tablaReservas').DataTable(opcionesReservas);\n            dataTableServicios = $('#tablaServicios').DataTable(opcionesServicios);\n\n            dataTableReservasInit = true;\n            dataTableServiciosInit = true;\n        } catch (error) {\n            console.error('Error al obtener reporte diario:', error);\n        }\n    }\n\n    function llenarTablaReservas(reservas) {\n        const tbody = document.querySelector('#tablaReservas tbody');\n        tbody.innerHTML = '';\n    \n        // Reiniciar totales antes de acumular\n        totalVentaServicios = 0;\n        totalReservaciones = 0;\n        totalGeneral = 0;\n    \n        reservas.forEach((reserva, index) => {\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td>${reserva.No_Reserva}</td>\n                    <td>${reserva.Huesped}</td>\n                    <td>${reserva.Habitaciones}</td>\n                    <td>MXN$${reserva.Precio_Total}</td>\n                    <td>MXN$${reserva.Descuento}</td>\n                    <td>MXN$${reserva.Cobro_Extra}</td>\n                    <td>MXN$${reserva.Adelanto}</td>\n                    <td>MXN$${reserva.Penalidad}</td>\n                    <td>MXN$${reserva.Ventas_Servicios}</td>\n                    <td>MXN$${reserva.Total}</td>\n                    <td>${reserva.Tiempo_Rebasado}</td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n        \n            const ventasServicios = parseFloat(reserva.Ventas_Servicios || 0);\n            const total = parseFloat(reserva.Total || 0);\n        \n            totalVentaServicios += ventasServicios;\n            totalReservaciones += total - ventasServicios;\n        });\n        \n        totalGeneral = totalVentaServicios + totalReservaciones;\n            \n        // Llenar <p> del resumen\n        document.getElementById('totalVentas').textContent = `MXN$${totalVentaServicios.toLocaleString('es-MX', { minimumFractionDigits: 2 })}`;\n        document.getElementById('totalReservas').textContent = `MXN$${totalReservaciones.toLocaleString('es-MX', { minimumFractionDigits: 2 })}`;\n        document.getElementById('totalGeneral').textContent = `MXN$${totalGeneral.toLocaleString('es-MX', { minimumFractionDigits: 2 })}`;\n    }    \n    \n    function llenarTablaServicios(ventas) {\n        const tbody = document.querySelector('#tablaServicios tbody');\n        tbody.innerHTML = '';\n    \n        // Reiniciamos totales por si se vuelve a llenar la tabla\n        totalVentaDirecta = 0;\n        totalVentaReservacion = 0;\n        totalVentaGeneral = 0;\n    \n        ventas.forEach((item, index) => {\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td>${item.Identificador}</td>\n                    <td>${item.Tipo}</td>\n                    <td>${item.Habitacion ?? '-'}</td>\n                    <td>${item.Articulo}</td>\n                    <td>${item.Cantidad}</td>\n                    <td>MXN$${item.Precio_Unitario}</td>\n                    <td>MXN$${item.Total}</td>\n                    <td>${item.Hora}</td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n    \n            const total = parseFloat(item.Total || 0);\n    \n            if (item.Tipo.toLowerCase() === 'huésped' || item.Tipo.toLowerCase() === 'huesped') {\n                totalVentaReservacion += total;\n            } else if (item.Tipo.toLowerCase() === 'público' || item.Tipo.toLowerCase() === 'publico') {\n                totalVentaDirecta += total;\n            }\n        });\n    \n        totalVentaGeneral = totalVentaReservacion + totalVentaDirecta;\n\n        document.getElementById('totalVentasDirecta').textContent = `MXN$${totalVentaDirecta.toFixed(2)}`;\n        document.getElementById('totalVentasReservacion').textContent = `MXN$${totalVentaReservacion.toFixed(2)}`;\n        document.getElementById('totalVentasGeneral').textContent = `MXN$${totalVentaGeneral.toFixed(2)}`;\n\n    }        \n\n    // 🔄 Ejecutar al cargar la página o cuando cambien filtros\n    document.addEventListener('DOMContentLoaded', initReportesDiarios);\n    document.getElementById('usuario').addEventListener('change', initReportesDiarios);\n    document.getElementById('fecha').addEventListener('change', initReportesDiarios);\n\n    //Llenar tabla\n\n    // document.getElementById('usuario').addEventListener('change', () => {\n    //     const usuarioId = document.getElementById('usuario').value;\n    //     const fecha = document.getElementById('fecha').value;\n    //     cargarDatosReporte(usuarioId, fecha);\n    //     console.log('Cargando reporte para:', usuarioId, fecha);\n    // });\n    \n    // document.getElementById('fecha').addEventListener('change', () => {\n    //     const usuarioId = document.getElementById('usuario').value;\n    //     const fecha = document.getElementById('fecha').value;\n    //     cargarDatosReporte(usuarioId, fecha);\n    //     console.log('Cargando reporte para:', usuarioId, fecha);\n    // });\n    \n    \n    // async function cargarDatosReporte(usuarioId, fecha) {\n    //     try {\n    //         const response = await fetch(`/api/reporte-diario/${usuarioId}/${fecha}`);\n    //         if (!response.ok) throw new Error('Error al obtener los datos del reporte');\n    \n    //         const datos = await response.json();\n    \n    //         // Llenar tabla de reservas\n    //         const tablaReservas = $('#tablaReservas').DataTable();\n    //         tablaReservas.clear();\n    //         datos.reservas.forEach(reserva => {\n    //             tablaReservas.row.add([\n    //                 reserva.No_Reserva,\n    //                 reserva.Habitaciones,\n    //                 reserva.Descuento,\n    //                 reserva.Cobro_Extra,\n    //                 reserva.Adelanto,\n    //                 reserva.Penalidad,\n    //                 reserva.Ventas_Servicios,\n    //                 reserva.Total,\n    //                 reserva.Tiempo_Rebasado\n    //             ]);\n    //         });\n    //         tablaReservas.draw();\n    \n    //         // Llenar tabla de servicios/ventas\n    //         const tablaServicios = $('#tablaServicios').DataTable();\n    //         tablaServicios.clear();\n    //         datos.ventas.forEach(venta => {\n    //             tablaServicios.row.add([\n    //                 venta.ID_Pago,\n    //                 venta.Tipo,\n    //                 venta.Habitacion,\n    //                 venta.Articulo,\n    //                 venta.Precio_Unitario,\n    //                 venta.Cantidad,\n    //                 venta.Total,\n    //                 venta.Hora,\n    //                 venta.Responsable\n    //             ]);\n    //         });\n    //         tablaServicios.draw();\n    \n    //         // Actualizar totales (si los estás mostrando en tarjetas o elementos HTML)\n    //         document.getElementById('ventasServicios').textContent = `$${datos.ventasServicios.toFixed(2)}`;\n    //         document.getElementById('totalTablaAlquiler').textContent = `$${datos.totalTablaAlquiler.toFixed(2)}`;\n    //         document.getElementById('totalReservaciones').textContent = `$${datos.totalReservaciones.toFixed(2)}`;\n    //         document.getElementById('ventasPublico').textContent = `$${datos.ventasPublico.toFixed(2)}`;\n    //         document.getElementById('totalFinal').textContent = `$${datos.totalFinal.toFixed(2)}`;\n    \n    //     } catch (error) {\n    //         console.error(error);\n    //         alert('Ocurrió un error al cargar los datos del reporte.');\n    //     }\n    // }\n    \n}\n","if (window.location.pathname === '/admin/reporte-mensual') {\n\n    let dataTableReservas;\n    let dataTableServicios;\n    let dataTableReservasInit = false;\n    let dataTableServiciosInit = false;\n\n    const nombreHotel = 'Hotel Paraíso Tropical';\n\n    function obtenerFechaFormateada() {\n        const fecha = new Date();\n        const year = fecha.getFullYear();\n        const month = String(fecha.getMonth() + 1).padStart(2, '0');\n        const day = String(fecha.getDate()).padStart(2, '0');\n        const hours = String(fecha.getHours()).padStart(2, '0');\n        const minutes = String(fecha.getMinutes()).padStart(2, '0');\n        const seconds = String(fecha.getSeconds()).padStart(2, '0');\n        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n    }\n\n    const fechaFormateada = obtenerFechaFormateada();\n    const mensajeTopReporte = `Generado el: ${fechaFormateada}`;\n    const tituloReporteReservas = `Reporte de Reservaciones - ${nombreHotel}`;\n    const tituloReporteServicios = `Reporte de Ventas y Servicios - ${nombreHotel}`;\n    const nombreArchivoReservas = `reservaciones_${fechaFormateada.replace(/[\\s:]/g, '_')}`;\n    const nombreArchivoServicios = `servicios_${fechaFormateada.replace(/[\\s:]/g, '_')}`;\n\n    const configBase = {\n        responsive: true,\n        paging: true,\n        ordering: true,\n        info: true,\n        language: {\n            url: '//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json'\n        },\n        dom: '<\"d-flex justify-content-between align-items-center mb-2\"fB>rtip'\n    };\n\n    const opcionesReservas = {\n        ...configBase,\n        buttons: [\n            {\n                extend: 'excelHtml5',\n                title: tituloReporteReservas,\n                messageTop: mensajeTopReporte,\n                filename: nombreArchivoReservas,\n                text: '<i class=\"fas fa-file-excel\"></i> Excel',\n                className: 'btn btn-success btn-sm'\n            },\n            {\n                extend: 'pdfHtml5',\n                title: tituloReporteReservas,\n                messageTop: mensajeTopReporte,\n                filename: nombreArchivoReservas,\n                text: '<i class=\"fas fa-file-pdf\"></i> PDF',\n                className: 'btn btn-danger btn-sm',\n                orientation: 'portrait',\n                pageSize: 'A4',\n                exportOptions: {\n                    columns: ':visible',\n                    modifier: {\n                        page: 'all'\n                    }\n                },\n                customize: function (doc) {\n                    doc.defaultStyle.fontSize = 10;\n                    doc.styles.tableHeader.fontSize = 12;\n                }\n            }\n        ]\n    };\n\n    const opcionesServicios = {\n        ...configBase,\n        buttons: [\n            {\n                extend: 'excelHtml5',\n                title: tituloReporteServicios,\n                messageTop: mensajeTopReporte,\n                filename: nombreArchivoServicios,\n                text: '<i class=\"fas fa-file-excel\"></i> Excel',\n                className: 'btn btn-success btn-sm'\n            },\n            {\n                extend: 'pdfHtml5',\n                title: tituloReporteServicios,\n                messageTop: mensajeTopReporte,\n                filename: nombreArchivoServicios,\n                text: '<i class=\"fas fa-file-pdf\"></i> PDF',\n                className: 'btn btn-danger btn-sm',\n                orientation: 'portrait',\n                pageSize: 'A4',\n                exportOptions: {\n                    columns: ':visible',\n                    modifier: {\n                        page: 'all'\n                    }\n                },\n                customize: function (doc) {\n                    doc.defaultStyle.fontSize = 10;\n                    doc.styles.tableHeader.fontSize = 12;\n                }\n            }\n        ]\n    };\n\n    async function initReporteMensual() {\n        const usuarioId = document.getElementById('usuario').value || 'null';\n        const mes = document.getElementById('mes').value;\n        const anio = document.getElementById('anio').value;\n\n        const url = `/api/reporte-mensual/${usuarioId}/${mes}/${anio}`;\n\n        try {\n            const response = await fetch(url);\n            const { reservas, ventas } = await response.json();\n\n            if (dataTableReservasInit) dataTableReservas.destroy();\n            if (dataTableServiciosInit) dataTableServicios.destroy();\n\n            llenarTablaReservas(reservas);\n            llenarTablaServicios(ventas);\n\n            dataTableReservas = $('#tablaReservas').DataTable(opcionesReservas);\n            dataTableServicios = $('#tablaServicios').DataTable(opcionesServicios);\n\n            dataTableReservasInit = true;\n            dataTableServiciosInit = true;\n        } catch (error) {\n            console.error('Error al obtener reporte mensual:', error);\n        }\n    }\n\n    function llenarTablaReservas(reservas) {\n        const tbody = document.querySelector('#tablaReservas tbody');\n        tbody.innerHTML = '';\n    \n        reservas.forEach((reserva, index) => {\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td>${reserva.No_Reserva}</td>\n                    <td>${reserva.Huesped}</td>\n                    <td>${reserva.Habitaciones}</td>\n                    <td>MXN$${reserva.Precio_Total}</td>\n                    <td>MXN$${reserva.Descuento}</td>\n                    <td>MXN$${reserva.Cobro_Extra}</td>\n                    <td>MXN$${reserva.Adelanto}</td>\n                    <td>MXN$${reserva.Penalidad}</td>\n                    <td>MXN$${reserva.Ventas_Servicios}</td>\n                    <td>MXN$${reserva.Total}</td>\n                    <td>${reserva.Tiempo_Rebasado}</td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    function llenarTablaServicios(ventas) {\n        const tbody = document.querySelector('#tablaServicios tbody');\n        tbody.innerHTML = '';\n    \n        ventas.forEach((item, index) => {\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td>${item.Identificador}</td>\n                    <td>${item.Tipo}</td>\n                    <td>${item.Habitacion ?? '-'}</td>\n                    <td>${item.Articulo}</td>\n                    <td>${item.Cantidad}</td>\n                    <td>${item.Precio_Unitario}</td>\n                    <td>${item.Total}</td>\n                    <td>${item.Hora}</td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    // Escuchar cambios\n    document.addEventListener('DOMContentLoaded', initReporteMensual);\n    document.getElementById('usuario').addEventListener('change', initReporteMensual);\n    document.getElementById('mes').addEventListener('change', initReporteMensual);\n    document.getElementById('anio').addEventListener('change', initReporteMensual);\n}\n","if(window.location.pathname === '/admin/reservaciones'){\n    // Elementos del DOM\n    const inputCorreo = document.getElementById('searchEmail');\n    const listaSugerencias = document.getElementById('sugerenciasCorreo');\n    const fechaEntrada = document.getElementById(\"fechaEntrada\");\n    const fechaSalida = document.getElementById(\"fechaSalida\");\n    const selectHabitacion = document.getElementById(\"habitacion\");\n    const btnSiguiente = document.getElementById('btnSiguiente');\n    const btnAtras = document.getElementById('btnAtras');\n    const btnConfirmar = document.getElementById('btnConfirmar'); // Asegúrate de tener este botón en el modal\n    const totalPagarInput = document.getElementById(\"totalPagar\");\n    const descuentoInput = document.getElementById(\"descuento\");\n    const cobroExtraInput = document.getElementById(\"cobroExtra\");\n    const adelantoInput = document.getElementById(\"adelanto\");\n\n    // Variables de control\n    let timeoutBusqueda;\n    let clienteNuevo = {};  \n    let pasoActual = 1;\n    let habitacionesDisponibles = []; // Definir la variable global para las habitaciones\n    let habitacionesSeleccionadas = [];\n\n    // Inicializar Choices.js para la selección de habitaciones\n    const choices = new Choices(selectHabitacion, {\n        removeItemButton: true,\n        placeholder: true,\n        placeholderValue: \"Seleccione una o más habitaciones\",\n        searchEnabled: false,\n    });\n\n    // Función para buscar clientes por correo en la API\n    async function buscarClientes(correo) {\n        try {\n            const response = await fetch(`/api/clientes/correo/${encodeURIComponent(correo)}`);\n            return await response.json();\n        } catch (error) {\n            console.error(\"Error al obtener clientes:\", error);\n            return [];\n        }\n    }\n\n    // Función para mostrar sugerencias de clientes en la lista desplegable\n    function mostrarSugerencias(clientes) {\n        listaSugerencias.innerHTML = '';\n        if (clientes.length === 0) {\n            listaSugerencias.classList.add('d-none');\n            return;\n        }\n        listaSugerencias.classList.remove('d-none');\n        clientes.forEach(cliente => {\n            const item = document.createElement('li');\n            item.classList.add('list-group-item', 'list-group-item-action');\n            item.textContent = cliente.correo;\n            item.dataset.id = cliente.id;\n            item.addEventListener('click', () => seleccionarCliente(cliente));\n            listaSugerencias.appendChild(item);\n        });\n    }\n\n    // Función para llenar los campos con la información del cliente seleccionado\n    function seleccionarCliente(cliente) {\n        inputCorreo.value = cliente.correo;\n        document.getElementById('nombre').value = cliente.nombre;\n        document.getElementById('apellidos').value = cliente.apellidos;\n        document.getElementById('documento_identidad').value = cliente.documento_identidad;\n        document.getElementById('telefono').value = cliente.telefono;\n        document.getElementById('direccion').value = cliente.direccion;\n        listaSugerencias.classList.add('d-none');\n    }\n\n    // Función para guardar los datos de un nuevo cliente ingresado\n    function guardarClienteNuevo() {\n        clienteNuevo = {\n            correo: inputCorreo.value.trim(),\n            nombre: document.getElementById('nombre').value.trim(),\n            apellidos: document.getElementById('apellidos').value.trim(),\n            documento_identidad: document.getElementById('documento_identidad').value.trim(),\n            telefono: document.getElementById('telefono').value.trim(),\n            direccion: document.getElementById('direccion').value.trim()\n        };\n    }\n\n        // Variables para la barra de progreso\n        const progressBar = document.getElementById('progressBar');\n\n        // Función para actualizar la barra de progreso\n        function actualizarBarraProgreso(porcentaje) {\n            progressBar.style.width = `${porcentaje}%`;\n            progressBar.setAttribute('aria-valuenow', porcentaje);\n            progressBar.textContent = `${porcentaje}%`;\n        }\n    \n        // Modificar la lógica de los pasos\n        btnSiguiente.addEventListener('click', () => {\n            switch (pasoActual) {\n                case 1:\n                    if (!document.getElementById('nombre').value.trim()) {\n                        guardarClienteNuevo();\n                    }\n                    const inputNombre = document.getElementById('nombre').value.trim();\n                    const inputTelefono = document.getElementById('telefono').value.trim();\n    \n                    if (!inputNombre || !inputTelefono) {\n                        mostrarAlerta('Campos Obligatorios', 'El nombre y el teléfono son obligatorios para crear reservación', 'warning');\n                        return;\n                    }\n                    cambiarPaso(2);\n                    actualizarBarraProgreso(66);  // Actualizar barra a 66% en el paso 2\n                    break;\n                case 2:\n                    habitacionesSeleccionadas = choices.getValue(true);\n                    if (habitacionesSeleccionadas.length === 0) {\n                        mostrarAlerta('No selecciono habitaciones','Por favor, seleccione una habitación.','warning');\n                        return;\n                    }\n                    cambiarPaso(3);\n                    // Calcular el total cuando llegues al paso 3\n                    calcularTotalPagar();  // Llamada aquí para calcular el total automáticamente\n                    btnSiguiente.classList.add('d-none'); // Ocultar el botón de Siguiente en el paso 3\n                    btnConfirmar.classList.remove('d-none'); // Mostrar el botón de Confirmar en el paso 3\n                    actualizarBarraProgreso(100);  // Actualizar barra a 100% en el paso 3\n                    break;\n            }\n        });\n    \n        // Función para cambiar de paso\n        function cambiarPaso(nuevoPaso) {\n            // Ocultar el paso actual y mostrar el nuevo paso\n            document.getElementById(`step${pasoActual}`).classList.add('d-none');\n            document.getElementById(`step${nuevoPaso}`).classList.remove('d-none');\n    \n            pasoActual = nuevoPaso;\n    \n            // Mostrar u ocultar el botón de \"Atras\" dependiendo del paso actual\n            btnAtras.classList.toggle('d-none', pasoActual === 1);\n    \n            // Actualizar el texto y la visibilidad de los botones\n            if (pasoActual === 3) {\n                btnSiguiente.textContent = \"Registrar\";  // En el paso 3 se muestra \"Registrar\"\n                btnConfirmar.classList.remove('d-none');\n                btnSiguiente.classList.add('d-none');\n            } else {\n                btnSiguiente.textContent = \"Siguiente\";  // En los otros pasos se muestra \"Siguiente\"\n                btnConfirmar.classList.add('d-none');\n                btnSiguiente.classList.remove('d-none');\n            }\n        }\n    /**\n     * Carga habitaciones disponibles según las fechas seleccionadas\n     */\n    async function cargarHabitaciones() {\n        if (!fechaEntrada.value || !fechaSalida.value) return;\n        try {\n            const response = await fetch(`/api/habitaciones/disponibles/${fechaEntrada.value}/${fechaSalida.value}`);\n            habitacionesDisponibles = await response.json();  // Guardar habitaciones disponibles\n            choices.clearChoices();\n            if (habitacionesDisponibles.length === 0) {\n                choices.setChoices([{ value: \"\", label: \"No hay habitaciones disponibles\", disabled: true }]);\n                return;\n            }\n            choices.setChoices(habitacionesDisponibles.map(habitacion => ({\n                value: habitacion.id,\n                label: `Habitación ${habitacion.numero} | ${habitacion.id_categoria.nombre} | Capacidad max. ${habitacion.id_categoria.capacidad_maxima} personas | $${habitacion.id_categoria.precio_base} MXN`\n            })));\n        } catch (error) {\n            console.error(\"Error al obtener habitaciones:\", error);\n        }\n    }\n\n    // Evento para detectar cambios en las fechas y cargar habitacione\n    fechaEntrada.addEventListener(\"change\", cargarHabitaciones);\n    fechaSalida.addEventListener(\"change\", cargarHabitaciones);\n\n    //Maneja el retroceso de pasos en el modal\n     \n    btnAtras.addEventListener('click', () => {\n        if (pasoActual > 1) {\n            cambiarPaso(pasoActual - 1);\n        }\n    });\n\n    // Maneja la búsqueda de clientes por correo con retraso\n    \n    inputCorreo.addEventListener('input', () => {\n        clearTimeout(timeoutBusqueda);\n        const valor = inputCorreo.value.trim();\n        if (valor.length < 3) {\n            listaSugerencias.classList.add('d-none');\n            return;\n        }\n        timeoutBusqueda = setTimeout(async () => {\n            mostrarSugerencias(await buscarClientes(valor));\n        }, 300);\n    });\n\n    // Oculta las sugerencias si se hace clic fuera del input\n     \n    document.addEventListener('click', (e) => {\n        if (!inputCorreo.contains(e.target) && !listaSugerencias.contains(e.target)) {\n            listaSugerencias.classList.add('d-none');\n        }\n    });\n    // Función para calcular el total a pagar\n    function calcularTotalPagar() {\n        let total = 0;\n\n        // Obtener la diferencia de noches entre las fechas de entrada y salida\n        const fechaEntradaDate = new Date(fechaEntrada.value);\n        const fechaSalidaDate = new Date(fechaSalida.value);\n        const diferenciaNoches = (fechaSalidaDate - fechaEntradaDate) / (1000 * 60 * 60 * 24);  // Calculamos la diferencia en días\n\n        if (diferenciaNoches <= 0) {\n            alert(\"La fecha de salida debe ser posterior a la de entrada.\");\n            return;\n        }\n\n        // Sumar los precios base de las habitaciones seleccionadas, multiplicados por las noches\n        habitacionesSeleccionadas.forEach(habitacionId => {\n            const habitacion = habitacionesDisponibles.find(h => h.id === habitacionId);  // Buscar la habitación en las disponibles\n            if (habitacion) {\n                total += parseFloat(habitacion.id_categoria.precio_base) * diferenciaNoches;  // Multiplicar por la cantidad de noches\n            }\n        });\n\n        // Guardamos el total de las habitaciones seleccionadas antes de aplicar ningún descuento o cobro extra\n        totalPagarOriginal = total;  // Aquí almacenamos el precio total sin descuentos ni cobros extras\n\n        // Obtener el descuento ingresado\n        const descuento = parseFloat(descuentoInput.value) || 0;  // Si no se ingresa un valor, el descuento será 0\n        const tipoDescuento = document.querySelector('input[name=\"tipoDescuento\"]:checked') ? \n                              document.querySelector('input[name=\"tipoDescuento\"]:checked').value : \n                              'monto';  // Si no está seleccionado, por defecto es 'monto'\n\n        // Aplicar el descuento\n        if (tipoDescuento === 'PORCENTAJE') {\n            total -= (total * descuento) / 100;  // Descuento en porcentaje\n        } else {\n            total -= descuento;  // Descuento en monto fijo\n        }\n\n        // Aplicar cobro extra\n        const cobroExtra = parseFloat(cobroExtraInput.value) || 0;  // Si no se ingresa un valor, el cobro extra será 0\n        total += cobroExtra;  // Sumar el cobro extra\n\n        // Asegurarse de que el total no sea negativo después de aplicar el descuento y el cobro extra\n        total = total < 0 ? 0 : total;\n\n        // Obtener el adelanto\n        const adelanto = parseFloat(adelantoInput.value) || 0;\n\n        // Restar el adelanto del total\n        total -= adelanto;  // Descontamos el adelanto del total\n\n        // Asegurarse de que el total no sea negativo\n        total = total < 0 ? 0 : total;\n\n        // Actualizar el total en el campo correspondiente\n        totalPagarInput.value = total.toFixed(2);  // Mostrar el total con 2 decimales\n    }\n        // Evento de Confirmar en el paso 3 del modal:\n        btnConfirmar.addEventListener('click', async () => {\n            // Primero, obtendremos todos los valores actualizados\n            let total = 0;\n            habitacionesSeleccionadas.forEach(habitacionId => {\n                const habitacion = habitacionesDisponibles.find(h => h.id === habitacionId);  // Buscar en habitacionesDisponibles\n                if (habitacion) {\n                    total += parseFloat(habitacion.id_categoria.precio_base);\n                }\n            });\n    \n            // Obtener el descuento\n            const descuento = parseFloat(descuentoInput.value) || 0;\n            const tipoDescuento = document.querySelector('input[name=\"tipoDescuento\"]:checked').value;\n            if (tipoDescuento === 'PORCENTAJE') {\n                total -= (total * descuento) / 100; // Se resta el porcentaje del total\n            } else {\n                total -= descuento; // Si es un monto, simplemente lo restamos\n            }\n    \n            // Aplicar cobro extra\n            const cobroExtra = parseFloat(cobroExtraInput.value) || 0;\n            total += cobroExtra;\n    \n            // Obtener el adelanto ingresado en el formulario\n            const adelanto = parseFloat(document.getElementById('adelanto').value) || 0;  // Si no se ingresa un valor, por defecto será 0\n    \n            // Restar el adelanto\n            total -= adelanto;  // Restar el adelanto del total\n    \n            // Asegurarse de que el total no sea negativo\n            //total = total < 0 ? 0 : total;\n            //console.log(total); este totak esta de mas y los calculos al dar confirmar\n    \n            // Actualizar el total en el campo correspondiente\n            //totalPagarInput.value = total.toFixed(2);\n    \n            // Obtener el cliente\n            let clienteFinal = {};\n    \n            if (clienteNuevo.correo) {\n                // Si el cliente es nuevo, usamos los datos que se ingresaron\n                clienteFinal = clienteNuevo;\n            } else {\n                // Si el cliente ya existía y fue seleccionado, usamos sus datos\n                clienteFinal = {\n                    correo: inputCorreo.value,\n                    nombre: document.getElementById('nombre').value,\n                    apellidos: document.getElementById('apellidos').value,\n                    documento_identidad: document.getElementById('documento_identidad').value,\n                    telefono: document.getElementById('telefono').value,\n                    direccion: document.getElementById('direccion').value\n                };\n            }\n    \n            // Enviar los datos al servidor\n            const url = '/api/reservaciones';  // URL de la API de reservaciones\n            const datos = new FormData();\n            \n            const totalPendiente = document.getElementById('totalPagar').value;\n            //console.log(totalPendiente);\n            // Crear la estructura de datos\n            const datosReserva = {\n                cliente: {\n                    correo: clienteFinal.correo,\n                    nombre: clienteFinal.nombre,\n                    apellidos: clienteFinal.apellidos,\n                    documento_identidad: clienteFinal.documento_identidad,\n                    telefono: clienteFinal.telefono,\n                    direccion: clienteFinal.direccion\n                },\n                fechas: {\n                    entrada: `${fechaEntrada.value} 14:00:00`, // Agregar manualmente la hora de entrada\n                    salida: `${fechaSalida.value} 12:00:00`   // Agregar manualmente la hora de salida\n                },\n                habitaciones: habitacionesSeleccionadas,  // Array de habitaciones seleccionadas\n                pago: {\n                    totalPagar: totalPendiente,\n                    totalPagarOriginal: totalPagarOriginal.toFixed(2),\n                    descuento: tipoDescuento === 'PORCENTAJE' ? (totalPagarOriginal * descuento) / 100 : descuento,\n                    tipoDescuento: tipoDescuento,\n                    cobroExtra: cobroExtra,\n                    adelanto: adelanto.toFixed(2)\n                },\n                observaciones: document.getElementById('observaciones').value.trim(),\n                metodo_pago: document.getElementById('metodoPago').value\n            };\n            \n            // console.log(datosReserva);\n            // return;\n            // Convertirlo a JSON para enviar al servidor\n            const jsonDatosReserva = JSON.stringify(datosReserva);\n    \n            // Enviar el JSON usando FormData (si es necesario)\n            datos.append('reserva', jsonDatosReserva);\n    \n            // Realizar la solicitud fetch\n            try {\n                const respuesta = await fetch(url, {\n                    method: 'POST',\n                    body: datos\n                });\n    \n                if (!respuesta.ok) {\n                    throw new Error('Error en la respuesta del servidor');\n                }\n    \n                const resultado = await respuesta.json();\n    \n                // Mostrar alerta con los resultados\n                mostrarAlerta3(resultado.titulo, resultado.mensaje, resultado.tipo);\n            } catch (error) {\n                console.error('Error en la solicitud:', error);\n            // Puedes agregar aquí un mensaje de error al usuario si es necesario\n            mostrarAlerta('Error', 'Hubo un problema al procesar la solicitud', 'error');\n            }\n    });\n    // Agregar listeners para actualizar en tiempo real el total cuando haya cambios\n    descuentoInput.addEventListener('input', calcularTotalPagar);\n    cobroExtraInput.addEventListener('input', calcularTotalPagar);\n    adelantoInput.addEventListener('input', calcularTotalPagar);\n    function resetearModal() {\n        // Limpiar todos los campos del formulario en el modal\n        document.getElementById('nombre').value = '';\n        document.getElementById('apellidos').value = '';\n        document.getElementById('documento_identidad').value = '';\n        document.getElementById('telefono').value = '';\n        document.getElementById('direccion').value = '';\n        document.getElementById('observaciones').value = '';\n        selectHabitacion.value = '';  // Limpiar la selección de habitación\n        fechaEntrada.value = '';  // Limpiar la fecha de entrada\n        fechaSalida.value = '';  // Limpiar la fecha de salida\n        totalPagarInput.value = '';  // Limpiar el total a pagar\n        adelantoInput.value = ''; // Limpiar el adelanto\n\n        // Limpiar los campos específicos de descuento y cobro extra\n        descuentoInput.value = '';  // Limpiar descuento\n        cobroExtraInput.value = '';  // Limpiar cobro extra\n\n        // Limpiar las habitaciones seleccionadas\n        choices.clearChoices();  // Esto debería limpiar las opciones seleccionadas del selector de habitaciones\n        \n        // Limpiar la selección de las habitaciones en el select (si existe el elemento selectHabitacion)\n        const habitacionesSelect = document.getElementById('selectHabitacion');\n        if (habitacionesSelect) {\n            for (let option of habitacionesSelect.options) {\n                option.selected = false;  // Deseleccionar todas las opciones\n            }\n        }\n\n        // Limpiar el campo de correo\n        inputCorreo.value = '';  // Limpiar correo\n\n        // Resetear el paso actual al step 1\n        pasoActual = 1;\n\n        // Mostrar solo el paso 1, ocultando los demás\n        document.getElementById('step1').classList.remove('d-none');\n        document.getElementById('step2').classList.add('d-none');\n        document.getElementById('step3').classList.add('d-none');\n        document.getElementById('btnConfirmar').classList.add('d-none');\n\n        // Resetear la visibilidad de los botones\n        btnAtras.classList.add('d-none');  // Ocultar el botón \"Previo\"\n        btnSiguiente.classList.remove('d-none');  // Mostrar el botón \"Siguiente\"\n    }\n}","if (window.location.pathname === '/admin/usuarios') {\n    \n    let dataTable;\n    let dataTableInit = false;\n\n    // Diccionarios para roles y estatus\n    const rolesDictionary = {\n        1: 'Administrador',\n        2: 'General',\n        3: 'Limpieza'\n    };\n\n    const estatusDictionary = {\n        0: 'Inactivo',\n        1: 'Activo'\n    };\n\n    // Configuración DataTable\n    const dataTableOption = {\n        destroy: true,\n        pageLength: 5,\n        language: {\n            url: 'https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json',\n        },\n        dom: '<\"row mb-2\"<\"d-flex justify-content-start col-sm-6\"f>>' +  \n             '<\"row\"<\"col-sm-12\"tr>>' + \n             '<\"row d-flex justify-content-between\"<\"col d-flex justify-content-start\"l><\"col d-flex justify-content-center\"i><\"col d-flex justify-content-end\"p>>',\n        columnDefs: [\n            { orderable: false, targets: [3, 8] },  // Desactiva ordenación en Dirección y Estatus\n            { visible: false, targets: [7] }       // Oculta la columna Password\n        ]\n    };\n\n    // Ejecutar funciones\n    initDataTable();\n\n    // Inicializamos DataTable\n    async function initDataTable() {\n        if (dataTableInit) {\n            dataTable.destroy(); // Destruye la tabla si ya existe previamente\n        }\n\n        const usuarios = await listarUsers(); // Esperamos los datos antes de inicializar DataTable\n\n        if (usuarios.length > 0) {\n            llenarTabla(usuarios);\n        }\n\n        // Inicializa DataTable\n        dataTable = $('#datatable_users').DataTable(dataTableOption);\n        dataTableInit = true;\n    }\n\n    // Función para obtener los datos de la API\n    async function listarUsers() {\n        try {\n            const response = await fetch('/api/usuarios');\n            const data = await response.json();\n            return data;\n        } catch (error) {\n            console.error('Error al obtener usuarios:', error);\n            return [];\n        }\n    }\n\n    // Función para llenar la tabla con los datos obtenidos\n    function llenarTabla(usuarios) {\n        const tbody = document.getElementById('tableBody_users');\n        tbody.innerHTML = ''; // Limpiamos el contenido previo\n\n        usuarios.forEach((user, index) => {\n            const rol = rolesDictionary[user.rol_id] || 'Desconocido';\n            const estatus = estatusDictionary[user.estatus] || 'Desconocido';\n\n            const row = `\n                <tr>\n                    <td>${index + 1}</td>\n                    <td><img src=\"/build/img/${user.img ? user.img : 'user'}.png\" alt=\"Imagen-usuario\" width=\"65\"></td>\n                    <td>${user.nombre}</td>\n                    <td>${user.apellido}</td>\n                    <td>${user.direccion}</td>\n                    <td>${user.email}</td>\n                    <td>${user.telefono}</td>\n                    <td>******</td> <!-- Ocultamos la contraseña en opciones de la tabla -->\n                    <td>${rol}</td>\n                    <td class=\"text-center\">${estatus}</td>\n                    <td>\n                        <!-- Botón de editar que abre el modal -->\n                        <button \n                            class=\"btn btn-sm btn-primary btnEditarUsuario\" \n                            data-id=\"${user.id}\" \n                            data-toggle=\"modal\" \n                            data-target=\"#usuarioEditarModal\">\n                            <i class=\"fa-solid fa-pen\"></i>\n                        </button>\n                        <!-- Botón de eliminar -->\n                        <button class=\"btn btn-sm btn-danger btn-eliminarUsuario\" data-id=\"${user.id}\">\n                            <i class=\"fa-solid fa-trash\"></i>\n                        </button>\n                    </td>\n                </tr>\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    // Delegación de eventos para eliminación de usuarios\n    document.getElementById('tableBody_users').addEventListener('click', async function (event) {\n        if (event.target.closest('.btn-eliminarUsuario')) {\n            const usuarioId = event.target.closest('.btn-eliminarUsuario').getAttribute('data-id');\n            const result = await Swal.fire({\n                title: '¿Estás seguro?',\n                text: \"Esta acción no se puede deshacer.\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#d33',\n                cancelButtonColor: '#3085d6',\n                confirmButtonText: 'Sí, eliminar',\n                cancelButtonText: 'Cancelar'\n            });\n\n            if (result.isConfirmed) {\n                try {\n                    const url = `/api/usuarios/${usuarioId}`;\n                    const respuesta = await fetch(url, {\n                        method: 'DELETE',\n                    });\n\n                    const resultado = await respuesta.json();\n                    mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n\n                    if (resultado.tipo === 'success') {\n                        await initDataTable();\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n    });\n\n    // ---------------    LLENAR MODAL PARA ACTUALIZAR  -----------------\n    document.addEventListener('click', async function (event) {\n        if (event.target.closest('.btnEditarUsuario')) {\n            const boton = event.target.closest('.btnEditarUsuario');\n            const userId = boton.dataset.id;\n            \n            try {\n                // Obtener los datos del usuario desde la API o una variable global\n                const respuesta = await fetch(`/api/usuarios/${userId}`);\n                if (!respuesta.ok) {\n                    throw new Error(`Error al obtener usuario: ${respuesta.statusText}`);\n                }\n    \n                const usuario = await respuesta.json();\n                // Llenar los campos del modal con los datos del usuario\n                document.getElementById('nombreEditar').value = usuario.nombre;\n                document.getElementById('apellidoEditar').value = usuario.apellido;\n                document.getElementById('direccionEditar').value = usuario.direccion;\n                document.getElementById('emailEditar').value = usuario.email;\n                document.getElementById('telefonoEditar').value = usuario.telefono;\n                document.getElementById('rol_idEditar').value = usuario.rol_id;\n                document.getElementById('estatusEditar').value = usuario.estatus;\n    \n                // Mostrar la imagen si existe\n                const imgElement = document.getElementById('imgEditar');\n                imgElement.src = usuario.img ? `/build/img/${usuario.img}.png` : '/build/img/user.png';                    \n    \n                // Guardar el ID en el botón de actualización\n                document.querySelector('.btnActualizarUsuario').dataset.id = userId;\n    \n                // Abrir el modal manualmente si es necesario\n                $('#usuarioEditarModal').modal('show');\n    \n            } catch (error) {\n                console.error('Error al obtener los datos del usuario:', error);\n            }\n        }\n    });\n    \n    // ---------------    ACTUALIZAR USUARIO     - ----------------\n    document.getElementById('formEditarUsuario').addEventListener('submit', async function (e) {\n        e.preventDefault();\n    \n        const userId = document.querySelector('.btnActualizarUsuario').dataset.id;\n    \n        const usuarioActualizado = {\n            nombre: document.getElementById('nombreEditar').value.trim(),\n            apellido: document.getElementById('apellidoEditar').value.trim(),\n            direccion: document.getElementById('direccionEditar').value.trim(),\n            email: document.getElementById('emailEditar').value.trim(),\n            telefono: document.getElementById('telefonoEditar').value.trim(),\n            password: document.getElementById('passwordEditar').value.trim(),\n            password2: document.getElementById('password2Editar').value.trim(),\n            rol_id: document.getElementById('rol_idEditar').value.trim(),\n            estatus: document.getElementById('estatusEditar').value.trim(),\n            img: document.getElementById('logoEditar').files[0]\n        };\n    \n        if (usuarioActualizado.password !== usuarioActualizado.password2) {\n            mostrarAlerta('Error', 'Las contraseñas no coinciden.', 'error');\n            return;\n        }\n\n        if (usuarioActualizado.telefono.length > 10) {\n            mostrarAlerta('Error', 'Telefono no valido', 'error');\n            return;\n        }\n    \n        delete usuarioActualizado.password2; // No enviar password2 al backend\n    \n        try {\n            const datos = new FormData();\n            Object.entries(usuarioActualizado).forEach(([key, value]) => datos.append(key, value));\n            const respuesta = await fetch(`/api/usuarios/${userId}`, {\n                method: 'POST',\n                body: datos\n            });\n    \n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n    \n        } catch (error) {\n            console.error('Error al actualizar usuario:', error);\n        }\n    });\n\n    //  --------------    CREAR NUEVO USUARIO     ----------------\n    const botonSubirUsuario = document.querySelector('.btnSubirUsuario');\n    botonSubirUsuario.addEventListener('click', async function (e) {\n        e.preventDefault();\n\n        const usuarioNuevo = {\n            nombre: document.getElementById('nombre').value.trim(),\n            apellido: document.getElementById('apellido').value.trim(),\n            direccion: document.getElementById('direccion').value.trim(),\n            email: document.getElementById('email').value.trim(),\n            telefono: document.getElementById('telefono').value.trim(),\n            password: document.getElementById('password').value.trim(),\n            password2: document.getElementById('password2').value.trim(),\n            rol_id: document.getElementById('rol_id').value.trim(),\n            estatus: document.getElementById('estatus').value.trim(),\n            img: document.getElementById('logo').files[0]\n        };\n\n        if (usuarioNuevo.email === \"\" || usuarioNuevo.nombre === \"\" || usuarioNuevo.direccion === \"\" || usuarioNuevo.password === \"\" || usuarioNuevo.password2 === \"\" || usuarioNuevo.telefono === \"\") {\n            mostrarAlerta2('Todos los campos son necesarios', 'error');\n            return;\n        }\n\n        if (usuarioNuevo.password !== usuarioNuevo.password2) {\n            mostrarAlerta2(\"Las contraseñas no coinciden.\", \"error\");\n            return;\n        }\n\n        if (usuarioNuevo.telefono.length > 10) {\n            mostrarAlerta2('Telefono no valido', 'error');\n            return;\n        }\n\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if (!emailRegex.test(usuarioNuevo.email)) {\n            mostrarAlerta2(\"El correo electrónico no tiene un formato válido.\", \"error\");\n            return;\n        }\n\n        delete usuarioNuevo.password2;\n\n        try {\n            const datos = new FormData();\n            Object.entries(usuarioNuevo).forEach(([key, value]) => datos.append(key, value));\n            const respuesta = await fetch('/api/usuarios', {\n                method: 'POST',\n                body: datos\n            });\n\n            const resultado = await respuesta.json();\n            mostrarAlerta(resultado.titulo, resultado.mensaje, resultado.tipo);\n            initDataTable();\n\n        } catch (error) {\n            console.error('Error en la solicitud:', error);\n        }\n    });\n    \n}","if (window.location.pathname === '/admin/reservaciones') {\n    document.addEventListener('DOMContentLoaded', function () {\n        var calendarEl = document.getElementById('calendar');\n        var modalElement = document.getElementById('modalReservacion');\n        var MyModal = new bootstrap.Modal(modalElement);\n        // Definir todasHabitaciones globalmente\n        let todasHabitaciones = [];\n        // Configuración del calendario\n        var calendar = new FullCalendar.Calendar(calendarEl, {\n            displayEventTime: false,\n            locale: 'es',\n            initialView: 'dayGridMonth',\n            headerToolbar: {\n                left: 'prev,next today',\n                center: 'title',\n                right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'\n            },\n            buttonText: {\n                today: 'Hoy',\n                prev: 'Anterior',\n                next: 'Siguiente',\n                month: 'Mes',\n                week: 'Semana',\n                day: 'Día',\n                list: 'Lista',\n            },\n            allDayText: 'Todo el día',\n            events: [],\n            dateClick: dateClickHandler\n        });\n\n        // Inicializar el calendario\n        calendar.render();\n        setupEventListeners();\n        loadReservations();\n\n        // Variables y modal para edición\n        const modalEditarReservacion = document.getElementById('modalEditar');\n        const MyModalEditarReserva = new bootstrap.Modal(modalEditarReservacion);\n        let reservacionOriginal;\n        let choices = null;\n        let totalPriceBase = 0;\n\n        // Configuración de eventos\n        calendar.on('eventClick', async function(info) {\n            await handleEventClick(info, MyModalEditarReserva);\n        });\n\n        // Manejador de clic en la fecha del calendario\n        function dateClickHandler(info) {\n            var startInput = document.getElementById('start');\n            if (startInput) {\n                startInput.value = info.dateStr;\n            } else {\n                console.error(\"El input con ID 'start' no se encontró.\");\n            }\n\n            // Antes de mostrar el modal, asegúrate de limpiar previamente las selecciones de habitaciones\n            if (choices) {\n                choices.clearChoices();\n            }\n\n            MyModal.show();\n        }\n\n        // Configuración de event listeners\n        function setupEventListeners() {\n            let btnNuevaReservacion = document.querySelector('#btnAgregarReservacion');\n            btnNuevaReservacion.addEventListener('click', function() {\n                MyModal.show();\n            });\n        }\n\n        // Cargar reservas desde el API\n        function loadReservations() {\n            fetch('http://localhost:3000/api/reservaciones')\n                .then(response => response.json())\n                .then(data => {\n                    data.forEach(reservacion => {\n                        const evento = {\n                            id: reservacion.ID_reserva,\n                            title: `${reservacion.habitaciones} | ${reservacion.cliente_nombre}`,\n                            start: reservacion.fecha_entrada,\n                            end: reservacion.fecha_salida,\n                            description: reservacion.estado_descripcion,\n                            allDay: false,\n                            color: reservacion.estado_color\n                        };\n                        calendar.addEvent(evento);\n                    });\n                })\n                .catch(error => console.error('Error al obtener las reservaciones:', error));\n        }\n\n        // Manejar clic en evento del calendario\n        async function handleEventClick(info, modal) {\n            const evento = info.event;\n            const idEvento = evento.id;\n\n            try {\n                const respuesta = await fetch(`/api/reservaciones/${idEvento}`);\n                if (!respuesta.ok) {\n                    throw new Error(`Error al obtener la reservación: ${respuesta.statusText}`);\n                }\n                const reservacion = await respuesta.json();\n                reservacionOriginal = { ...reservacion };\n                populateEditForm(reservacion);\n                await cargarHabitacionesDisponibles(reservacion.fecha_entrada.split(' ')[0], reservacion.fecha_salida.split(' ')[0], reservacion.ID_habitacion);\n\n                modal.show();\n\n            } catch (error) {\n                console.error('Error al obtener los datos de la reservación:', error);\n            }\n        }\n\n        // Población de formulario de edición\n        function populateEditForm(reservacion) {\n            document.getElementById('idReservacion').value = reservacion.ID_reserva;\n            document.getElementById('nombreEditar').value = reservacion.cliente_nombre;\n            document.getElementById('searchEmailEditar').value = reservacion.correo;\n            document.getElementById('apellidosEditar').value = reservacion.cliente_apellidos;\n            document.getElementById('documento_identidadEditar').value = reservacion.documento_identidad;\n            document.getElementById('telefonoEditar').value = reservacion.telefono;\n            document.getElementById('direccionEditar').value = reservacion.direccion;\n            document.getElementById('observacionesEditar').value = reservacion.observaciones;\n\n            let fechaEntrada = reservacion.fecha_entrada.split(' ')[0];\n            let fechaSalida = reservacion.fecha_salida.split(' ')[0];\n            document.getElementById('fechaEntradaEditar').value = fechaEntrada;\n            document.getElementById('fechaSalidaEditar').value = fechaSalida;\n            // Rellenar campos de pago\n            document.getElementById('adelantoEditar').value = reservacion.adelanto;\n            document.getElementById('cobroExtraEditar').value = reservacion.cobro_extra;\n\n            if (reservacion.tipo_descuento === \"PORCENTAJE\") {\n                let porcentajeDescuento = (reservacion.descuento_aplicado / reservacion.precio_total) * 100;\n                document.getElementById('descuentoEditar').value = porcentajeDescuento.toFixed(2);\n                document.getElementById('descuentoPorcentajeEditar').checked = true;\n                document.getElementById('descuentoMontoEditar').checked = false;\n            } else {\n                document.getElementById('descuentoEditar').value = reservacion.descuento_aplicado;\n                document.getElementById('descuentoMontoEditar').checked = true;\n                document.getElementById('descuentoPorcentajeEditar').checked = false;\n            }\n\n            document.getElementById('metodoPagoEditar').value = reservacion.metodo_pago;\n            document.getElementById('estatusEditar').value = reservacion.ID_estado;\n            document.getElementById('totalPagarEditar').value = reservacion.precio_pendiente;\n        }\n\n        // Cargar habitaciones disponibles\n        async function cargarHabitacionesDisponibles(fechaEntrada, fechaSalida, habitacionesSeleccionadasIds) {\n            const selectHabitacion = document.getElementById('habitacionEditar');\n\n            try {\n                const response = await fetch(`/api/habitaciones/disponibles/${fechaEntrada}/${fechaSalida}`);\n                let habitacionesDisponibles = await response.json();\n                \n                const habitacionesSeleccionadas = habitacionesSeleccionadasIds ? habitacionesSeleccionadasIds.split(',').map(id => id.trim()) : [];\n\n                const responseHabitaciones = await fetch('/api/habitaciones');\n                todasHabitaciones = await responseHabitaciones.json();\n\n                const habitacionesCompletasSeleccionadas = todasHabitaciones.filter(habitacion => habitacionesSeleccionadas.includes(habitacion.id.toString()));\n                habitacionesDisponibles = habitacionesDisponibles.filter(h => !habitacionesSeleccionadas.includes(h.id.toString()));\n\n                // Inicializa Choices solo si aún no está inicializado\n                if (!choices) {\n                    choices = new Choices(selectHabitacion, {\n                        removeItemButton: true,\n                        placeholder: true,\n                        placeholderValue: \"Seleccione una o más habitaciones\",\n                        searchEnabled: false,\n                    });\n                }\n\n                // Elimina las elecciones anteriores antes de agregar nuevas para evitar duplicados\n                choices.clearChoices();\n\n                let opciones = [];\n\n                // Mantén las habitaciones seleccionadas\n                habitacionesCompletasSeleccionadas.forEach(habitacion => {\n                    opciones.push({\n                        value: habitacion.id,\n                        label: `Habitación ${habitacion.numero} | ${habitacion.id_categoria.nombre} | Capacidad max. ${habitacion.id_categoria.capacidad_maxima} personas | $${habitacion.id_categoria.precio_base} MXN`,\n                        selected: true  // Marcar como seleccionada\n                    });\n                });\n\n                // Agrega habitaciones disponibles\n                habitacionesDisponibles.forEach(habitacion => {\n                    opciones.push({\n                        value: habitacion.id,\n                        label: `Habitación ${habitacion.numero} | ${habitacion.id_categoria.nombre} | Capacidad max. ${habitacion.id_categoria.capacidad_maxima} personas | $${habitacion.id_categoria.precio_base} MXN`\n                    });\n                });\n                // Elimina todas las opciones antes de agregar las nuevas\n                choices.clearStore();\n\n                // Establece las nuevas opciones\n                choices.setChoices(opciones);\n\n                // Calcular precio total cuando cambien las habitaciones seleccionadas o las fechas\n                calculateTotalPrice();\n\n                // Obtener habitaciones seleccionadas desde Choices\n                document.getElementById('habitacionEditar').addEventListener('change', function() {\n                    let habitacionesSeleccionadas = choices.getValue(true);\n                    //console.log('Habitaciones seleccionadas:', habitacionesSeleccionadas);\n                    calculateTotalPrice();\n                });\n\n                // Detectar cambio de fechas\n                document.getElementById('fechaEntradaEditar').addEventListener('change', function() {\n                    calculateTotalPrice();\n                });\n\n                document.getElementById('fechaSalidaEditar').addEventListener('change', function() {\n                    calculateTotalPrice();\n                });\n\n            } catch (error) {\n                console.error('Error al obtener habitaciones disponibles:', error);\n            }\n        }\n\n        // Calcular precio total\n        function calculateTotalPrice() {\n            const habitacionesSeleccionadas = choices.getValue(true);\n            const fechaEntrada = document.getElementById('fechaEntradaEditar').value;\n            const fechaSalida = document.getElementById('fechaSalidaEditar').value;\n\n            if (!fechaEntrada || !fechaSalida || habitacionesSeleccionadas.length === 0) {\n                return;\n            }\n\n            // Calcular la cantidad de noches\n            const fechaEntradaObj = new Date(fechaEntrada);\n            const fechaSalidaObj = new Date(fechaSalida);\n            const diferenciaEnTiempo = fechaSalidaObj - fechaEntradaObj;\n            const noches = diferenciaEnTiempo / (1000 * 3600 * 24); // Convertir a días\n\n            let totalPrice = 0;\n\n            // Obtener los precios de las habitaciones seleccionadas\n            habitacionesSeleccionadas.forEach(id => {\n                const habitacion = todasHabitaciones.find(h => h.id.toString() === id);\n                if (habitacion) {\n                    totalPrice += habitacion.id_categoria.precio_base * noches;\n                }\n            });\n            totalPriceBase = totalPrice;\n            // Ahora, ajustamos el total con base en los inputs de pago\n\n            // Obtener valores de inputs de pago\n            const adelanto = parseFloat(document.getElementById('adelantoEditar').value) || 0;\n            const cobroExtra = parseFloat(document.getElementById('cobroExtraEditar').value) || 0;\n\n            const descuento = parseFloat(document.getElementById('descuentoEditar').value) || 0;\n            const descuentoPorcentaje = document.getElementById('descuentoPorcentajeEditar').checked;\n\n            // Si el descuento es por porcentaje, aplicamos el porcentaje\n            if (descuentoPorcentaje) {\n                totalPrice -= (totalPrice * (descuento / 100));\n            } else {\n                totalPrice -= descuento;\n            }\n\n            // Sumamos el cobro extra y restamos el adelanto\n            totalPrice += cobroExtra;\n            totalPrice -= adelanto;\n\n            // Mostrar el precio final\n            console.log(`Precio total: $${totalPrice.toFixed(2)} MXN`);\n            const totalPagarInput = document.getElementById('totalPagarEditar');\n            totalPagarInput.value = totalPrice.toFixed(2);\n        }\n\n        // Función para actualizar el precio cada vez que se cambien los campos de pago\n        function setupEventListenersForPriceUpdates() {\n            // Escuchar cambios en los inputs de fecha, adelanto, cobro extra y descuento\n            document.getElementById('fechaEntradaEditar').addEventListener('change', calculateTotalPrice);\n            document.getElementById('fechaSalidaEditar').addEventListener('change', calculateTotalPrice);\n            document.getElementById('adelantoEditar').addEventListener('input', calculateTotalPrice);\n            document.getElementById('cobroExtraEditar').addEventListener('input', calculateTotalPrice);\n            document.getElementById('descuentoEditar').addEventListener('input', calculateTotalPrice);\n            document.getElementById('descuentoPorcentajeEditar').addEventListener('change', calculateTotalPrice);\n            document.getElementById('descuentoMontoEditar').addEventListener('change', calculateTotalPrice);\n        }\n\n        // Llamamos la función de setup para los listeners\n        setupEventListenersForPriceUpdates();\n\n        document.getElementById('btnEditar').addEventListener('click', async function (e) {\n            e.preventDefault();\n        \n            const reservacionId = document.getElementById('idReservacion').value;\n        \n            const reservacionActualizada = {\n                cliente: {\n                    correo: document.getElementById('searchEmailEditar').value.trim(),\n                    nombre: document.getElementById('nombreEditar').value.trim(),\n                    apellidos: document.getElementById('apellidosEditar').value.trim(),\n                    documento_identidad: document.getElementById('documento_identidadEditar').value.trim(),\n                    telefono: document.getElementById('telefonoEditar').value.trim(),\n                    direccion: document.getElementById('direccionEditar').value.trim()\n                },\n                fechas: {\n                    entrada: `${document.getElementById('fechaEntradaEditar').value.trim()} 14:00:00`, // Hora manual\n                    salida: `${document.getElementById('fechaSalidaEditar').value.trim()} 12:00:00`   // Hora manual\n                },\n                habitaciones: choices.getValue(true), // Suponiendo que choices está correctamente inicializado\n                pago: {\n                    totalPagar: parseFloat(document.getElementById('totalPagarEditar').value.trim()) || 0,\n                    totalPagarOriginal: parseFloat(totalPriceBase || 0).toFixed(2), // Solo lo convierte a número y luego lo redondea\n                    descuento: document.getElementById('descuentoPorcentajeEditar').checked \n                        ? ((totalPriceBase || 0) * (parseFloat(document.getElementById('descuentoEditar').value.trim()) || 0)) / 100 \n                        : parseFloat(document.getElementById('descuentoEditar').value.trim()) || 0,\n                    tipoDescuento: document.getElementById('descuentoPorcentajeEditar').checked ? 'PORCENTAJE' : 'MONTO',\n                    cobroExtra: parseFloat(document.getElementById('cobroExtraEditar').value.trim()) || 0,\n                    adelanto: parseFloat(document.getElementById('adelantoEditar').value.trim()) || 0\n                },                \n                observaciones: document.getElementById('observacionesEditar').value.trim(),\n                metodo_pago: document.getElementById('metodoPagoEditar').value.trim(),\n                ID_estado: document.getElementById('estatusEditar').value\n            };\n\n            //console.log(reservacionActualizada);\n            //return;\n        \n            try {\n                // Mostrar spinner de carga\n                document.getElementById('loadingSpinner').classList.remove('d-none');\n        \n                const respuestaUpdate = await fetch(`/api/reservaciones/${reservacionId}`, {\n                    method: 'PATCH',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify(reservacionActualizada)\n                });\n        \n                // Ocultar spinner\n                document.getElementById('loadingSpinner').classList.add('d-none');\n        \n                if (!respuestaUpdate.ok) {\n                    const errorData = await respuestaUpdate.json();\n                    throw new Error(errorData.mensaje || 'Error desconocido al actualizar');\n                }\n        \n                const resultado = await respuestaUpdate.json();\n                mostrarAlerta3(resultado.titulo, resultado.mensaje, resultado.tipo);\n        \n                // Cerrar modal\n                $('#modalEditar').modal('hide');\n        \n            } catch (error) {\n                console.error('Error al actualizar la reservación:', error);\n                mostrarAlerta('Error', error.message, 'error');\n            }\n        });                \n    });\n}\n"]}